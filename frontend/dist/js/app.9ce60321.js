(()=>{"use strict";var e={533:(e,a,t)=>{var s=t(751),i=t(641);const r={id:"app"},n={key:0,class:"toast-error"};function l(e,a,t,l,o,d){const c=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(c),(0,i.bF)(s.eB,{name:"fade"},{default:(0,i.k6)((()=>[o.showExpiredToast?((0,i.uX)(),(0,i.CE)("div",n," ðŸ”’ Session expired. Please log in again. ")):(0,i.Q3)("",!0)])),_:1})])}var o=t(380);const d=(0,o.A)(),c={name:"App",data(){return{showExpiredToast:!1,tokenCheckInterval:null}},created(){this.checkTokenOnce(),this.startTokenWatcher()},beforeUnmount(){clearInterval(this.tokenCheckInterval)},watch:{$route(e){this.showExpiredToast&&"/"===e.path&&setTimeout((()=>{this.showExpiredToast=!1}),3e3)}},methods:{checkTokenOnce(){"true"===this.$route.query.expired&&(this.showExpiredToast=!0,setTimeout((()=>{this.showExpiredToast=!1,this.$router.replace({path:"/",query:{}})}),3e3))},startTokenWatcher(){this.tokenCheckInterval=setInterval((()=>{const e=localStorage.getItem("token");if(!e)return;const a=this.parseJwt(e);if(!a||!a.exp)return;const t=Math.floor(Date.now()/1e3);a.exp<t&&this.triggerTokenExpired()}),1e4)},parseJwt(e){try{const a=e.split(".")[1],t=atob(a);return JSON.parse(t)}catch(a){return null}},triggerTokenExpired(){this.showExpiredToast=!0,d.emit("token-expired"),setTimeout((()=>{localStorage.clear(),this.$router.push({path:"/",query:{expired:"true"}})}),5e3)}}};var m=t(262);const u=(0,m.A)(c,[["render",l]]),p=u;var h=t(220);const _={class:"main-container"},g={class:"left-panel"},v={class:"right-panel"},b={key:1};function f(e,a,t,s,r,n){const l=(0,i.g2)("Login"),o=(0,i.g2)("Dashboard"),d=(0,i.g2)("InfoPanel"),c=(0,i.g2)("PatientList"),m=(0,i.g2)("PersonalArea"),u=(0,i.g2)("AdminPanel");return(0,i.uX)(),(0,i.CE)("div",_,[(0,i.Lk)("div",g,[r.isLoggedIn?((0,i.uX)(),(0,i.Wv)(o,{key:1,class:"dashboard-container",user:r.userDetails,onLogout:n.handleLogout,onNavigate:n.changePanel},null,8,["user","onLogout","onNavigate"])):((0,i.uX)(),(0,i.Wv)(l,{key:0,onLogin:n.handleLogin},null,8,["onLogin"]))]),(0,i.Lk)("div",v,[r.isLoggedIn?((0,i.uX)(),(0,i.CE)("div",b,["Home"===r.selectedPanel?((0,i.uX)(),(0,i.Wv)(d,{key:0,isLoggedIn:r.isLoggedIn},null,8,["isLoggedIn"])):"PatientList"===r.selectedPanel?((0,i.uX)(),(0,i.Wv)(c,{key:1})):"PersonalArea"===r.selectedPanel?((0,i.uX)(),(0,i.Wv)(m,{key:2,onProfileUpdated:n.handleProfileUpdate},null,8,["onProfileUpdated"])):"AdminPanel"===r.selectedPanel?((0,i.uX)(),(0,i.Wv)(u,{key:3})):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.Wv)(d,{key:0}))])])}var k=t(33);const y={class:"login-section"},L={class:"login-background"},w={class:"form-group"},C={class:"form-group"},x={key:0,class:"error-message"};function I(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",y,[a[7]||(a[7]=(0,i.Lk)("div",{class:"logo-image-container"},null,-1)),(0,i.Lk)("div",L,[(0,i.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"])),class:"login-form"},[(0,i.Lk)("div",w,[a[3]||(a[3]=(0,i.Lk)("label",null,"Username",-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>r.username=e),placeholder:"Enter your username"},null,512),[[s.Jo,r.username]])]),(0,i.Lk)("div",C,[a[4]||(a[4]=(0,i.Lk)("label",null,"Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),placeholder:"Enter your password"},null,512),[[s.Jo,r.password]])]),a[5]||(a[5]=(0,i.Lk)("div",{class:"forgot-password"},[(0,i.Lk)("a",{href:"#"},"Forgot password? Click here")],-1)),a[6]||(a[6]=(0,i.Lk)("button",{type:"submit",class:"login-button"},"Login",-1))],32),r.errorMessage?((0,i.uX)(),(0,i.CE)("p",x,(0,k.v_)(r.errorMessage),1)):(0,i.Q3)("",!0)])])}var P=t(953),M=t(335);async function E(){try{const e=localStorage.getItem("token");if(!e)throw new Error("User is not authenticated");const a=await fetch("https://mediclear.cs.bgu.ac.il/api/users",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!a.ok)throw new Error("Failed to fetch users");return await a.json()}catch(e){return console.error("Error fetching users:",e),[]}}async function U(e,a){try{const t=await fetch("https://mediclear.cs.bgu.ac.il/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})});if(!t.ok){const e=await t.json();throw new Error(e.error||"Login failed")}const s=await t.json();return localStorage.setItem("token",s.token),{success:!0,user:s.user,token:s.token}}catch(t){return console.error("Error during login:",t),{success:!1,message:t.message||"Login failed"}}}async function A(e){try{const a=localStorage.getItem("token"),t=await fetch("https://mediclear.cs.bgu.ac.il/api/users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add user");const s=await t.json();return{success:!0,user:s}}catch(a){return console.error("Error adding user:",a),{success:!1,message:"An error occurred while adding the user."}}}async function S(e){try{const a=localStorage.getItem("token"),t=await fetch(`https://mediclear.cs.bgu.ac.il/api/users/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!t.ok)throw new Error("Failed to update user status");const s=await t.json();return{success:!0,user:s}}catch(a){return console.error("Error updating user status:",a),{success:!1,message:"An error occurred while updating the user status."}}}async function D(e){try{const a=localStorage.getItem("token"),t=await fetch(`https://mediclear.cs.bgu.ac.il/api/users/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!t.ok)throw new Error("Failed to delete user");const s=await t.json();return{success:!0,message:s.message}}catch(a){return console.error("Error deleting user:",a),{success:!1,message:"An error occurred while deleting the user."}}}const X=async(e,a)=>{try{const t=await M.A.get(`https://mediclear.cs.bgu.ac.il/api/user/${e}`,{headers:{Authorization:`Bearer ${a}`}});return t.data}catch(t){throw console.error("Error fetching user profile:",t),t}},F=async(e,a,t)=>{try{const s=await M.A.patch(`https://mediclear.cs.bgu.ac.il/api/users/${e}/updateDetails`,a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return s.data}catch(s){throw console.error("Error updating profile:",s),s}},T=async(e,a,t)=>{try{const s=localStorage.getItem("token"),i=await M.A.patch(`https://mediclear.cs.bgu.ac.il/api/users/${e}/password`,{currentPassword:a,newPassword:t},{headers:{Authorization:`Bearer ${s}`}});return i.data}catch(s){throw console.error("Error changing password:",s),s.response?.data||{success:!1,message:"Server error"}}};async function N(e){try{const a=await fetch(`https://mediclear.cs.bgu.ac.il/api/users/check-username/${e}`);if(!a.ok)throw new Error("Failed to check username");return await a.json()}catch(a){return console.error("Error checking username:",a),{available:!1,message:"Error checking username"}}}async function O(e,a=null){try{let t=`https://mediclear.cs.bgu.ac.il/api/users/check-license/${e}`;a&&(t+=`?userId=${a}`);const s=await fetch(t);return await s.json()}catch(t){return console.error("Error checking license ID:",t),{available:!1}}}const R=async(e,a)=>{try{const t=localStorage.getItem("token"),s=await M.A.patch(`https://mediclear.cs.bgu.ac.il/api/users/${e}/reset-password`,{newPassword:a},{headers:{Authorization:`Bearer ${t}`}});return s.data}catch(t){return console.error("Error resetting password:",t),{success:!1,message:"Failed to reset password."}}};async function V(e,a){const t=localStorage.getItem("token");try{const s=await M.A.patch(`https://mediclear.cs.bgu.ac.il/api/users/${e}/updateDetails`,a,{headers:{Authorization:`Bearer ${t}`}});return{success:!0,user:s.data.user}}catch(s){return console.error("Error updating user:",s),{success:!1,message:"Failed to update user."}}}const Q={name:"Login",emits:["login"],setup(e,{emit:a}){const t=(0,P.KR)(""),s=(0,P.KR)(""),i=(0,P.KR)(""),r=async()=>{if(t.value.trim()&&s.value){const e=t.value.trim().toLowerCase();console.log("ðŸ“¢ Attempting login with:",e,s.value);const r=await U(e,s.value);console.log("âœ… Login response:",r),r.success?(console.log("ðŸ“¢ Saving user data:",r.user),localStorage.setItem("token",r.token),localStorage.setItem("userId",r.user._id),a("login",r.user)):i.value=r.message}else i.value="Please fill in both fields."};return{username:t,password:s,errorMessage:i,handleSubmit:r}}},$=(0,m.A)(Q,[["render",I]]),j=$,z={class:"user-profile"},B={class:"user-details"},W={key:0},G={key:1},H={class:"action-buttons"};function q(e,a,t,s,r,n){const l=(0,i.g2)("PatientModal"),o=(0,i.g2)("AdminPanelModal");return(0,i.uX)(),(0,i.CE)("div",z,[(0,i.Lk)("div",{class:"user-avatar",style:(0,k.Tr)({backgroundImage:`url(${t.user.profilePictureUrl||r.defaultAvatar})`})},null,4),a[11]||(a[11]=(0,i.Lk)("div",{class:"separator"},null,-1)),(0,i.Lk)("div",B,[(0,i.Lk)("h2",null," Hello, "+(0,k.v_)("None"!==t.user.title?t.user.title+" ":"")+(0,k.v_)(t.user.fullName)+"! ",1),t.user.licenseId?((0,i.uX)(),(0,i.CE)("p",W,[a[5]||(a[5]=(0,i.Lk)("strong",null,"Medical License ID:",-1)),(0,i.eW)(" "+(0,k.v_)(t.user.licenseId),1)])):(0,i.Q3)("",!0),t.user.specialty?((0,i.uX)(),(0,i.CE)("p",G,[a[6]||(a[6]=(0,i.Lk)("strong",null,"Medical Specialties:",-1)),(0,i.eW)(" "+(0,k.v_)(t.user.specialty),1)])):(0,i.Q3)("",!0)]),a[12]||(a[12]=(0,i.Lk)("div",{class:"separator"},null,-1)),(0,i.Lk)("div",H,[(0,i.Lk)("button",{class:"action-button",onClick:a[0]||(a[0]=e=>n.navigateTo("Home"))},a[7]||(a[7]=[(0,i.Lk)("i",{class:"fas fa-home"},null,-1),(0,i.eW)(" Home ")])),(0,i.Lk)("button",{class:"action-button",onClick:a[1]||(a[1]=e=>n.navigateTo("PatientList"))},a[8]||(a[8]=[(0,i.Lk)("i",{class:"fas fa-clipboard-list"},null,-1),(0,i.eW)(" Patient List ")])),(0,i.Lk)("button",{class:"action-button",onClick:a[2]||(a[2]=e=>n.navigateTo("PersonalArea"))},a[9]||(a[9]=[(0,i.Lk)("i",{class:"fas fa-user-circle"},null,-1),(0,i.eW)(" My Profile ")])),t.user.isAdmin?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"action-button admin-button",onClick:a[3]||(a[3]=e=>n.navigateTo("AdminPanel"))},a[10]||(a[10]=[(0,i.Lk)("i",{class:"fa fa-tools"},null,-1),(0,i.eW)(" User Management ")]))):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"logout-button",onClick:a[4]||(a[4]=a=>e.$emit("logout"))},"Logout")]),r.showPatientModal?((0,i.uX)(),(0,i.Wv)(l,{key:0,showModal:r.showPatientModal,onOnClose:n.closePatientModal},null,8,["showModal","onOnClose"])):(0,i.Q3)("",!0),r.showAdminModal?((0,i.uX)(),(0,i.Wv)(o,{key:1,showModal:r.showAdminModal,onOnClose:n.closeAdminModal,currentUser:t.user},null,8,["showModal","onOnClose","currentUser"])):(0,i.Q3)("",!0)])}const J={class:"modal"},K={class:"modal-content"},Z={key:0,class:"loading-message"},Y={key:1,class:"error-message"},ee={key:2,class:"patient-list"},ae=["onClick"],te={class:"patient-card-content"},se={class:"patient-id"},ie={key:3};function re(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",J,[(0,i.Lk)("div",K,[(0,i.Lk)("span",{class:"close-button",onClick:a[0]||(a[0]=a=>e.$emit("onClose"))},"Ã—"),a[2]||(a[2]=(0,i.Lk)("h2",{class:"modal-title"},"Patient List",-1)),r.loading?((0,i.uX)(),(0,i.CE)("div",Z," Loading patient data... ")):(0,i.Q3)("",!0),r.error?((0,i.uX)(),(0,i.CE)("div",Y,(0,k.v_)(r.error),1)):(0,i.Q3)("",!0),!r.loading&&r.patients.length>0?((0,i.uX)(),(0,i.CE)("div",ee,[(0,i.Lk)("ul",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.patients,((e,a)=>((0,i.uX)(),(0,i.CE)("li",{key:a,onClick:a=>n.goToPatientPage(e.patient_id),class:"patient-card"},[(0,i.Lk)("div",te,[(0,i.Lk)("span",se,"ID: "+(0,k.v_)(e.patient_id),1)])],8,ae)))),128))])])):r.loading||0!==r.patients.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ie,a[1]||(a[1]=[(0,i.Lk)("p",{class:"no-data-message"},"No patient data available.",-1)])))])])}var ne=t(501),le=t.n(ne);const oe={name:"PatientModal",props:{showModal:{type:Boolean,required:!0}},data(){return{loading:!0,error:"",patients:[]}},methods:{async fetchPatients(){try{const e=await fetch("/project_data/example_test_data.csv");if(!e.ok)throw new Error("Failed to fetch patient data");const a=await e.text();le().parse(a,{header:!0,skipEmptyLines:!0,complete:e=>{this.patients=e.data,this.loading=!1},error:e=>{this.error="Failed to parse CSV file",console.error(e),this.loading=!1}})}catch(e){this.error=e.message,console.error(e),this.loading=!1}},goToPatientPage(e){this.$router.push({path:"/local",query:{patientId:e}})}},mounted(){this.fetchPatients()}},de=(0,m.A)(oe,[["render",re],["__scopeId","data-v-fb1bdd78"]]),ce=de,me={key:0,class:"modal-overlay"},ue={class:"modal-container"},pe={class:"modal-header"},he={class:"modal-body"},_e={class:"search-and-add-bar"},ge={key:0,class:"error-message"},ve={key:1,class:"loading-indicator"},be={key:2,class:"user-list"},fe=["onClick"],ke={class:"user-info"},ye={class:"user-role"},Le={class:"expand-button"},we={key:0},Ce={key:1},xe={key:0,class:"user-details"},Ie={key:0,class:"detail-item"},Pe={key:1,class:"detail-item"},Me={key:2,class:"detail-item"},Ee={key:3,class:"detail-item"},Ue={key:4,class:"detail-item"},Ae={key:5,class:"detail-item"},Se={class:"actions"},De=["onClick"],Xe=["onClick"],Fe={key:3,class:"no-users"};function Te(e,a,t,r,n,l){const o=(0,i.g2)("AddUserModal");return(0,i.uX)(),(0,i.CE)("div",null,[n.showAddUserModal?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",me,[(0,i.Lk)("div",ue,[(0,i.Lk)("div",pe,[a[3]||(a[3]=(0,i.Lk)("h2",null,"Admin Panel - Manage Users",-1)),(0,i.Lk)("button",{class:"close-button",onClick:a[0]||(a[0]=a=>e.$emit("onClose"))},"âœ–")]),(0,i.Lk)("div",he,[(0,i.Lk)("div",_e,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.searchQuery=e),type:"text",placeholder:"Search user by username",class:"search-input"},null,512),[[s.Jo,n.searchQuery]]),(0,i.Lk)("button",{class:"add-user-button",onClick:a[2]||(a[2]=(...e)=>l.openAddUserModal&&l.openAddUserModal(...e))}," + Add User ")]),n.errorMessage?((0,i.uX)(),(0,i.CE)("div",ge,(0,k.v_)(n.errorMessage),1)):(0,i.Q3)("",!0),n.isLoading?((0,i.uX)(),(0,i.CE)("div",ve," Loading users... ")):(0,i.Q3)("",!0),!n.isLoading&&l.filteredUsers.length?((0,i.uX)(),(0,i.CE)("div",be,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredUsers,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e._id,class:(0,k.C4)(["user-card",e.status])},[(0,i.Lk)("div",{class:"user-card-header",onClick:a=>l.toggleDetails(e)},[(0,i.Lk)("div",ke,[(0,i.Lk)("h3",null,(0,k.v_)(e.username),1),(0,i.Lk)("span",ye,(0,k.v_)(e.role),1)]),(0,i.Lk)("button",Le,[n.selectedUser?._id===e._id?((0,i.uX)(),(0,i.CE)("span",we,"â–²")):((0,i.uX)(),(0,i.CE)("span",Ce,"â–¼"))])],8,fe),n.selectedUser?._id===e._id?((0,i.uX)(),(0,i.CE)("div",xe,[e.fullName?((0,i.uX)(),(0,i.CE)("div",Ie,[(0,i.Lk)("p",null,[a[4]||(a[4]=(0,i.Lk)("strong",null,"Full Name:",-1)),(0,i.eW)(" "+(0,k.v_)(e.fullName),1)])])):(0,i.Q3)("",!0),e.email?((0,i.uX)(),(0,i.CE)("div",Pe,[(0,i.Lk)("p",null,[a[5]||(a[5]=(0,i.Lk)("strong",null,"Email:",-1)),(0,i.eW)(" "+(0,k.v_)(e.email),1)])])):(0,i.Q3)("",!0),e.phoneNumber?((0,i.uX)(),(0,i.CE)("div",Me,[(0,i.Lk)("p",null,[a[6]||(a[6]=(0,i.Lk)("strong",null,"Phone:",-1)),(0,i.eW)(" "+(0,k.v_)(e.phoneNumber),1)])])):(0,i.Q3)("",!0),e.gender?((0,i.uX)(),(0,i.CE)("div",Ee,[(0,i.Lk)("p",null,[a[7]||(a[7]=(0,i.Lk)("strong",null,"Gender:",-1)),(0,i.eW)(" "+(0,k.v_)(e.gender),1)])])):(0,i.Q3)("",!0),e.title?((0,i.uX)(),(0,i.CE)("div",Ue,[(0,i.Lk)("p",null,[a[8]||(a[8]=(0,i.Lk)("strong",null,"Title:",-1)),(0,i.eW)(" "+(0,k.v_)(e.title),1)])])):(0,i.Q3)("",!0),e.specialty?((0,i.uX)(),(0,i.CE)("div",Ae,[(0,i.Lk)("p",null,[a[9]||(a[9]=(0,i.Lk)("strong",null,"Specialty:",-1)),(0,i.eW)(" "+(0,k.v_)(e.specialty),1)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Se,[(0,i.Lk)("button",{class:"status-button",onClick:a=>l.handleToggleStatus(e._id)},(0,k.v_)("active"===e.status?"Suspend":"Activate"),9,De),(0,i.Lk)("button",{class:"delete-button",onClick:a=>l.handleDeleteUser(e._id)}," Delete ",8,Xe)])])):(0,i.Q3)("",!0)],2)))),128))])):(0,i.Q3)("",!0),n.isLoading||l.filteredUsers.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Fe," No users found. "))])])])),n.showAddUserModal?((0,i.uX)(),(0,i.Wv)(o,{key:1,onOnClose:l.closeAddUserModal,onOnUserAdded:l.refreshUsers},null,8,["onOnClose","onOnUserAdded"])):(0,i.Q3)("",!0)])}const Ne={class:"modal-overlay"},Oe={class:"modal-container"},Re={class:"modal-header"},Ve={class:"modal-body"},Qe={class:"form-group"},$e={class:"form-group"},je={class:"form-group"},ze={class:"form-group"},Be={class:"form-group"},We={class:"form-group"},Ge={class:"form-group"},He={class:"form-group"},qe={class:"modal-footer"};function Je(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",Ne,[(0,i.Lk)("div",Oe,[(0,i.Lk)("div",Re,[a[12]||(a[12]=(0,i.Lk)("h2",null,"Create a New User Profile",-1)),a[13]||(a[13]=(0,i.Lk)("p",{class:"modal-subtitle"},"Fill in the details below to add a new user to the system.",-1)),(0,i.Lk)("button",{class:"close-button",onClick:a[0]||(a[0]=a=>e.$emit("onClose"))},"âœ–")]),(0,i.Lk)("div",Ve,[(0,i.Lk)("form",{onSubmit:a[9]||(a[9]=(0,s.D$)(((...e)=>l.addUser&&l.addUser(...e)),["prevent"]))},[(0,i.Lk)("section",null,[a[18]||(a[18]=(0,i.Lk)("h3",{class:"section-title"},"Personal Information",-1)),(0,i.Lk)("div",Qe,[a[14]||(a[14]=(0,i.Lk)("label",{for:"username"},[(0,i.eW)("Username: "),(0,i.Lk)("span",{class:"required"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.newUser.username=e),type:"text",id:"username",placeholder:"Enter username",required:""},null,512),[[s.Jo,n.newUser.username]])]),(0,i.Lk)("div",$e,[a[15]||(a[15]=(0,i.Lk)("label",{for:"fullName"},[(0,i.eW)("Full Name: "),(0,i.Lk)("span",{class:"required"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.newUser.fullName=e),type:"text",id:"fullName",placeholder:"Enter full name",required:""},null,512),[[s.Jo,n.newUser.fullName]])]),(0,i.Lk)("div",je,[a[17]||(a[17]=(0,i.Lk)("label",{for:"gender"},"Gender:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.newUser.gender=e),id:"gender"},a[16]||(a[16]=[(0,i.Lk)("option",{value:"male"},"Male",-1),(0,i.Lk)("option",{value:"female"},"Female",-1),(0,i.Lk)("option",{value:"other"},"Other",-1)]),512),[[s.u1,n.newUser.gender]])])]),(0,i.Lk)("section",null,[a[23]||(a[23]=(0,i.Lk)("h3",{class:"section-title"},"Account Settings",-1)),(0,i.Lk)("div",ze,[a[19]||(a[19]=(0,i.Lk)("label",{for:"email"},"Email:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.newUser.email=e),type:"email",id:"email",placeholder:"Enter email (optional)"},null,512),[[s.Jo,n.newUser.email]])]),(0,i.Lk)("div",Be,[a[21]||(a[21]=(0,i.Lk)("label",{for:"status"},"Account Status:",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[5]||(a[5]=e=>n.newUser.status=e),id:"status",required:""},a[20]||(a[20]=[(0,i.Lk)("option",{value:"active"},"Active",-1),(0,i.Lk)("option",{value:"suspended"},"Suspended",-1)]),512),[[s.u1,n.newUser.status]])]),(0,i.Lk)("div",We,[a[22]||(a[22]=(0,i.Lk)("label",{for:"password"},[(0,i.eW)("Password: "),(0,i.Lk)("span",{class:"required"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>n.newUser.password=e),type:"password",id:"password",placeholder:"Enter password",required:""},null,512),[[s.Jo,n.newUser.password]])])]),(0,i.Lk)("section",null,[a[26]||(a[26]=(0,i.Lk)("h3",{class:"section-title"},"Additional Details",-1)),(0,i.Lk)("div",Ge,[a[24]||(a[24]=(0,i.Lk)("label",{for:"profilePictureUrl"},"Profile Picture URL:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>n.newUser.profilePictureUrl=e),type:"url",id:"profilePictureUrl",placeholder:"Enter profile picture URL"},null,512),[[s.Jo,n.newUser.profilePictureUrl]])]),(0,i.Lk)("div",He,[a[25]||(a[25]=(0,i.Lk)("label",{for:"phoneNumber"},"Phone Number:",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>n.newUser.phoneNumber=e),type:"tel",id:"phoneNumber",placeholder:"Enter phone number"},null,512),[[s.Jo,n.newUser.phoneNumber]])])])],32)]),(0,i.Lk)("div",qe,[(0,i.Lk)("button",{type:"button",class:"cancel-button",onClick:a[10]||(a[10]=a=>e.$emit("onClose"))},"Cancel"),(0,i.Lk)("button",{type:"submit",class:"save-button",onClick:a[11]||(a[11]=(...e)=>l.addUser&&l.addUser(...e))},"Save")])])])}const Ke={name:"AddUserModal",props:["showModal"],data(){return{newUser:{username:"",fullName:"",gender:"",email:"",status:"active",profilePictureUrl:"",phoneNumber:"",password:""}}},methods:{async addUser(){if(this.newUser.username&&this.newUser.fullName&&this.newUser.password)try{const e=await fetch("http://localhost:3000/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.newUser)});if(!e.ok)throw new Error("Failed to add user");this.$emit("onUserAdded"),this.$emit("onClose")}catch(e){console.error("Error adding user:",e)}else alert("Please fill in all required fields (marked with *).")}}},Ze=(0,m.A)(Ke,[["render",Je],["__scopeId","data-v-234ed42a"]]),Ye=Ze,ea={name:"ManageUsersModal",props:["showModal"],components:{AddUserModal:Ye},data(){return{users:[],selectedUser:null,searchQuery:"",showAddUserModal:!1,isLoading:!1,errorMessage:""}},computed:{filteredUsers(){return Array.isArray(this.users)?this.users.filter((e=>e.username.toLowerCase().includes(this.searchQuery.toLowerCase())||e.email&&e.email.toLowerCase().includes(this.searchQuery.toLowerCase())||e.phoneNumber&&e.phoneNumber.includes(this.searchQuery))):[]}},methods:{toggleDetails(e){this.selectedUser=this.selectedUser?._id===e._id?null:e},async handleDeleteUser(e){try{const a=await D(e);a.success?this.refreshUsers():this.errorMessage=a.message||"Failed to delete user."}catch(a){console.error("Error deleting user:",a),this.errorMessage="Failed to delete user. Please try again."}},async handleToggleStatus(e){try{const a=await S(e);a.success?this.refreshUsers():this.errorMessage=a.message||"Failed to toggle user status."}catch(a){console.error("Error toggling user status:",a),this.errorMessage="Failed to update user status. Please try again."}},async fetchUsers(){this.isLoading=!0,this.errorMessage="";try{const e=await E();this.users=e}catch(e){console.error("Failed to fetch users:",e),this.errorMessage="Failed to load users. Please try again.",this.users=[]}finally{this.isLoading=!1}},openAddUserModal(){this.showAddUserModal=!0},closeAddUserModal(){this.showAddUserModal=!1},refreshUsers(){this.fetchUsers()}},async created(){await this.fetchUsers()}},aa=(0,m.A)(ea,[["render",Te],["__scopeId","data-v-2c76f1be"]]),ta=aa,sa={name:"Dashboard",props:{user:{type:Object,required:!0}},components:{PatientModal:ce,AdminPanelModal:ta},data(){return{defaultAvatar:"https://static.vecteezy.com/system/resources/previews/034/466/010/non_2x/cartoon-blood-character-and-medical-doctor-stethoscope-for-health-care-hospital-pulse-heartbeat-design-vector.jpg",showPatientModal:!1,showAdminModal:!1}},methods:{navigateTo(e){this.$emit("navigate",e)},openPatientModal(){this.showPatientModal=!0},closePatientModal(){this.showPatientModal=!1},openAdminModal(){this.showAdminModal=!0},closeAdminModal(){this.showAdminModal=!1}}},ia=(0,m.A)(sa,[["render",q]]),ra=ia,na={class:"info-panel"},la={class:"card-container"};function oa(e,a,t,s,r,n){const l=(0,i.g2)("Card");return(0,i.uX)(),(0,i.CE)("div",na,[(0,i.Lk)("h2",{class:(0,k.C4)(["typewriter",{done:s.isTitleTypingDone}])},(0,k.v_)(s.typedTitle),3),(0,i.Lk)("p",{class:(0,k.C4)(["typewriter",{done:s.isParagraphTypingDone}])},(0,k.v_)(s.typedParagraph),3),(0,i.Lk)("div",la,[(0,i.bF)(l,{title:"Global Data",buttonText:"GO Global",onClick:a[0]||(a[0]=e=>s.navigate("/global")),imageClass:"global-image",disabled:!1}),(0,i.bF)(l,{title:"Personal Patient Data",buttonText:"GO Personal",onClick:a[1]||(a[1]=e=>s.navigate("/local")),imageClass:"local-image",disabled:!t.isLoggedIn,overlayText:"You need to login to get access"},null,8,["disabled"])])])}const da=["disabled"],ca={key:0,class:"overlay"};function ma(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",{class:(0,k.C4)(["card",{disabled:t.disabled}])},[(0,i.Lk)("h3",null,(0,k.v_)(t.title),1),(0,i.Lk)("div",{class:(0,k.C4)(["card-image",t.imageClass])},null,2),(0,i.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>t.onClick&&t.onClick(...e)),disabled:t.disabled},(0,k.v_)(t.buttonText),9,da),t.disabled?((0,i.uX)(),(0,i.CE)("div",ca,(0,k.v_)(t.overlayText),1)):(0,i.Q3)("",!0)],2)}const ua={name:"Card",props:{title:{type:String,required:!0},buttonText:{type:String,required:!0},onClick:{type:Function,required:!0},imageClass:{type:String,default:""},disabled:{type:Boolean,default:!1},overlayText:{type:String,default:"This is disabled"}}},pa=(0,m.A)(ua,[["render",ma]]),ha=pa,_a={name:"InfoPanel",props:{isLoggedIn:{type:Boolean,required:!0}},components:{Card:ha},setup(){const e=(0,h.rd)(),a="Medical AI Mortality Prediction Model",t="ICU MediClear specializes in mortality prediction for ICU patients, combining artificial intelligence models with explainability to help clinicians and enhance decision-making in critical care.",s=(0,P.KR)(""),r=(0,P.KR)(""),n=(0,P.KR)(!1),l=(0,P.KR)(!1),o=(e,a,t=50,s=null)=>{let i=0;const r=setInterval((()=>{i<e.length?(a.value+=e[i],i++):(clearInterval(r),s&&s())}),t)},d=a=>{e.push(a)};return(0,i.sV)((()=>{o(a,s,50,(()=>{n.value=!0,setTimeout((()=>{o(t,r,20,(()=>{l.value=!0}))}),300)}))})),{navigate:d,typedTitle:s,typedParagraph:r,isTitleTypingDone:n,isParagraphTypingDone:l}}},ga=(0,m.A)(_a,[["render",oa],["__scopeId","data-v-b90fe724"]]),va=ga,ba={class:"patient-list-container"},fa={class:"content"},ka={key:0,class:"loading-message"},ya={key:1,class:"error-message"},La={key:2,class:"patient-list"},wa=["onClick"],Ca={class:"patient-card-content"},xa={class:"patient-details"},Ia={class:"patient-id"},Pa={key:3,class:"no-data-message"};function Ma(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",ba,[a[5]||(a[5]=(0,i.Lk)("div",{class:"header"},[(0,i.Lk)("h2",null,"Patient List")],-1)),(0,i.Lk)("div",fa,[r.loading?((0,i.uX)(),(0,i.CE)("div",ka,a[0]||(a[0]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,i.eW)(" Loading patient data... ")]))):r.error?((0,i.uX)(),(0,i.CE)("div",ya,[a[1]||(a[1]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,i.eW)(" "+(0,k.v_)(r.error),1)])):r.patients.length>0?((0,i.uX)(),(0,i.CE)("div",La,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.patients,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,onClick:a=>n.goToPatientPage(e.patient_id),class:"patient-card"},[(0,i.Lk)("div",Ca,[a[2]||(a[2]=(0,i.Lk)("i",{class:"fas fa-user-injured patient-icon"},null,-1)),(0,i.Lk)("div",xa,[(0,i.Lk)("span",Ia,"Patient ID: "+(0,k.v_)(e.patient_id),1)]),a[3]||(a[3]=(0,i.Lk)("i",{class:"fas fa-chevron-right arrow-icon"},null,-1))])],8,wa)))),128))])):((0,i.uX)(),(0,i.CE)("div",Pa,a[4]||(a[4]=[(0,i.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,i.eW)(" No patient data available. ")])))])])}const Ea={name:"PatientList",data(){return{loading:!0,error:"",patients:[]}},methods:{async fetchPatients(){try{const e=await fetch("/project_data/example_test_data.csv");if(!e.ok)throw new Error("Failed to fetch patient data");const a=await e.text();le().parse(a,{header:!0,skipEmptyLines:!0,complete:e=>{this.patients=e.data,this.loading=!1},error:e=>{this.error="Failed to parse CSV file",console.error(e),this.loading=!1}})}catch(e){this.error=e.message,console.error(e),this.loading=!1}},goToPatientPage(e){this.$router.push({path:"/local",query:{patientId:e}})}},mounted(){this.fetchPatients()}},Ua=(0,m.A)(Ea,[["render",Ma],["__scopeId","data-v-5c133bae"]]),Aa=Ua,Sa={class:"admin-panel"},Da={class:"header"},Xa={key:0,class:"add-user-form"},Fa={class:"avatar-container"},Ta=["src"],Na={class:"form-fields"},Oa={class:"input-group"},Ra={key:0,class:"error-message"},Va={class:"input-group"},Qa={key:0,class:"error-message"},$a={key:1,class:"error-message"},ja={key:2,class:"error-message"},za={key:3,class:"success-message"},Ba={class:"password-row"},Wa={class:"input-wrapper password-input-wrapper"},Ga=["type"],Ha={key:0,class:"error-message"},qa={class:"input-group"},Ja={key:0,class:"error-message"},Ka={key:1,class:"error-message"},Za={class:"input-group"},Ya={key:0,class:"error-message"},et={class:"input-group"},at={key:0,class:"error-message"},tt={class:"input-group"},st={key:0,class:"error-message"},it={class:"toggle-row"},rt={class:"toggle-group"},nt={class:"toggle-group"},lt=["disabled"],ot={key:0,class:"error-message"},dt={key:1},ct={class:"search-and-add-bar"},mt={key:0,class:"error-message"},ut={key:1,class:"loading-indicator"},pt={key:2,class:"user-list"},ht=["onClick"],_t={class:"user-info"},gt={class:"user-role"},vt={class:"expand-button"},bt={key:0,class:"user-details-container"},ft={class:"user-card-layout"},kt={class:"user-info"},yt={key:0,class:"detail-item"},Lt={key:1,class:"detail-item"},wt={key:2,class:"detail-item"},Ct={key:3,class:"detail-item"},xt={key:4,class:"detail-item"},It={key:5,class:"detail-item"},Pt={key:6,class:"detail-item"},Mt={class:"user-avatar-section"},Et={class:"username-badge"},Ut={key:0,class:"actions"},At=["onClick"],St=["onClick"],Dt=["onClick"],Xt={key:1,class:"edit-form"},Ft={class:"input-group"},Tt={key:0,class:"error-message"},Nt={class:"input-group"},Ot={class:"input-group"},Rt={key:0,class:"error-message"},Vt={class:"input-group"},Qt={key:0,class:"error-message"},$t={class:"input-group"},jt={key:0,class:"error-message"},zt={class:"input-group"},Bt={class:"input-group"},Wt={key:0,class:"error-message"},Gt={class:"toggle-row"},Ht={class:"toggle-group"},qt={class:"toggle-group"},Jt={class:"actions"},Kt={class:"reset-password-section"},Zt={key:0},Yt={key:0},es={class:"input-group"},as={key:0,class:"error-message"},ts={class:"button-group center-buttons"},ss={key:1,class:"confirmation-success"},is={key:1,class:"confirmation-text"},rs={class:"center-buttons"},ns={key:3,class:"no-users"};function ls(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",Sa,[(0,i.Lk)("h2",Da,(0,k.v_)("addUser"===n.currentView?"Admin Panel - Add User to System":"Admin Panel - User Management"),1),"addUser"===n.currentView?((0,i.uX)(),(0,i.CE)("div",Xa,[(0,i.Lk)("button",{class:"back-button",onClick:a[0]||(a[0]=(...e)=>l.toggleAddUserForm&&l.toggleAddUserForm(...e))},a[49]||(a[49]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,i.eW)(" Back ")])),(0,i.Lk)("div",Fa,[(0,i.Lk)("img",{src:n.newUser.profilePictureUrl||n.defaultAvatar,class:"avatar-img"},null,8,Ta)]),(0,i.Lk)("div",Na,[(0,i.Lk)("div",Oa,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>n.newUser.fullName=e),type:"text",placeholder:"Full Name",required:"",onInput:a[2]||(a[2]=(...e)=>l.validateFullName&&l.validateFullName(...e)),class:(0,k.C4)({"invalid-field":n.fullNameInvalid})},null,34),[[s.Jo,n.newUser.fullName]]),n.fullNameInvalid?((0,i.uX)(),(0,i.CE)("p",Ra," Full name must contain English letters only ")):(0,i.Q3)("",!0)]),a[54]||(a[54]=(0,i.Lk)("p",null,null,-1)),(0,i.Lk)("div",Va,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>n.newUser.username=e),type:"text",placeholder:"Username",required:"",onInput:a[4]||(a[4]=(...e)=>l.validateUsername&&l.validateUsername(...e))},null,544),[[s.Jo,n.newUser.username]]),e.usernameHasSpaces?((0,i.uX)(),(0,i.CE)("p",Qa,"Username cannot contain spaces")):(0,i.Q3)("",!0),e.usernameInvalid?((0,i.uX)(),(0,i.CE)("p",$a,"Username can only contain English letters and numbers")):(0,i.Q3)("",!0),e.usernameHasSpaces||e.usernameInvalid||!1!==n.usernameAvailable?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("p",ja,"Username is already taken")),!n.usernameAvailable||e.usernameHasSpaces||e.usernameInvalid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("p",za,"Username is available"))]),(0,i.Lk)("div",Ba,[(0,i.Lk)("div",Wa,[(0,i.bo)((0,i.Lk)("input",{type:n.passwordVisible?"text":"password","onUpdate:modelValue":a[5]||(a[5]=e=>n.newUser.password=e),placeholder:"Password",required:"",onInput:a[6]||(a[6]=(...e)=>l.validatePassword&&l.validatePassword(...e)),class:(0,k.C4)({"invalid-field":n.passwordInvalid,"valid-field":!n.passwordInvalid&&n.newUser.password})},null,42,Ga),[[s.hp,n.newUser.password]]),(0,i.Lk)("span",{class:"toggle-password",onClick:a[7]||(a[7]=(...e)=>l.togglePassword&&l.togglePassword(...e))},[(0,i.Lk)("i",{class:(0,k.C4)(n.passwordVisible?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),n.passwordInvalid?((0,i.uX)(),(0,i.CE)("p",Ha," Password must be at least 6 characters and include only English letters, numbers or symbols ")):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"generate-button",onClick:a[8]||(a[8]=(0,s.D$)(((...e)=>l.generatePassword&&l.generatePassword(...e)),["prevent"]))}," Generate a random password "),a[50]||(a[50]=(0,i.Lk)("p",null,null,-1))]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>n.newUser.title=e)},[a[51]||(a[51]=(0,i.Lk)("option",{disabled:"",value:""},"Select Title",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.titles,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e},(0,k.v_)(e),1)))),128))],512),[[s.u1,n.newUser.title]]),a[55]||(a[55]=(0,i.Lk)("p",null,null,-1)),(0,i.Lk)("div",qa,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[10]||(a[10]=e=>n.newUser.licenseId=e),type:"text",placeholder:"License ID",required:"",onInput:a[11]||(a[11]=(...e)=>l.validateLicenseId&&l.validateLicenseId(...e)),class:(0,k.C4)({"invalid-field":n.licenseIdInvalid,"valid-field":n.licenseIdValid})},null,34),[[s.Jo,n.newUser.licenseId]]),n.licenseIdNotNumeric?((0,i.uX)(),(0,i.CE)("p",Ja," License ID must contain digits only âŒ ")):(0,i.Q3)("",!0),n.licenseIdInvalid?((0,i.uX)(),(0,i.CE)("p",Ka,"This Medical License ID is already belong to some user in the system âŒ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Za,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[12]||(a[12]=e=>n.newUser.specialty=e),type:"text",placeholder:"Specialty",onInput:a[13]||(a[13]=(...e)=>l.validateSpecialty&&l.validateSpecialty(...e)),class:(0,k.C4)({"invalid-field":n.specialtyInvalid})},null,34),[[s.Jo,n.newUser.specialty]]),n.specialtyInvalid?((0,i.uX)(),(0,i.CE)("p",Ya,"Specialty must contain English letters only")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",et,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[14]||(a[14]=e=>n.newUser.email=e),type:"email",placeholder:"Email",onInput:a[15]||(a[15]=e=>n.emailInvalid=!!n.newUser.email&&!l.isValidEmail(n.newUser.email))},null,544),[[s.Jo,n.newUser.email]]),n.emailInvalid?((0,i.uX)(),(0,i.CE)("p",at,"Invalid email format")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",tt,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[16]||(a[16]=e=>n.newUser.phoneNumber=e),type:"tel",placeholder:"Phone Number",onInput:a[17]||(a[17]=e=>n.phoneInvalid=!!n.newUser.phoneNumber&&!l.isValidIsraeliPhone(n.newUser.phoneNumber))},null,544),[[s.Jo,n.newUser.phoneNumber]]),n.phoneInvalid?((0,i.uX)(),(0,i.CE)("p",st," Phone must start with 05 and be 10 digits ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",it,[(0,i.Lk)("div",rt,[a[52]||(a[52]=(0,i.Lk)("span",{class:"toggle-label"},"Gender:",-1)),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:"male"===n.newUser.gender}]),onClick:a[18]||(a[18]=e=>n.newUser.gender="male")}," Male ",2),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:"female"===n.newUser.gender}]),onClick:a[19]||(a[19]=e=>n.newUser.gender="female")}," Female ",2)]),(0,i.Lk)("div",nt,[a[53]||(a[53]=(0,i.Lk)("span",{class:"toggle-label"},"Admin Permission?",-1)),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:"user"===n.newUser.role}]),onClick:a[20]||(a[20]=e=>n.newUser.role="user")}," No ",2),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:"admin"===n.newUser.role}]),onClick:a[21]||(a[21]=e=>n.newUser.role="admin")}," Yes ",2)])])]),(0,i.Lk)("button",{type:"submit",class:"save-button",onClick:a[22]||(a[22]=(...e)=>l.handleAddUser&&l.handleAddUser(...e)),disabled:!l.canSubmit}," Create New User ",8,lt),n.errorMessage?((0,i.uX)(),(0,i.CE)("div",ot,(0,k.v_)(n.errorMessage),1)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0),"list"===n.currentView?((0,i.uX)(),(0,i.CE)("div",dt,[(0,i.Lk)("div",ct,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[23]||(a[23]=e=>n.searchQuery=e),type:"text",placeholder:"Search by username, full name or medical license ID",class:"search-input"},null,512),[[s.Jo,n.searchQuery]]),(0,i.Lk)("button",{class:"add-user-button",onClick:a[24]||(a[24]=(...e)=>l.toggleAddUserForm&&l.toggleAddUserForm(...e))}," + Add User ")]),n.errorMessage?((0,i.uX)(),(0,i.CE)("div",mt,(0,k.v_)(n.errorMessage),1)):(0,i.Q3)("",!0),n.isLoading?((0,i.uX)(),(0,i.CE)("div",ut," Loading users... ")):(0,i.Q3)("",!0),!n.isLoading&&l.filteredUsers.length?((0,i.uX)(),(0,i.CE)("div",pt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredUsers,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e._id,class:(0,k.C4)(["user-card",e.status,{admin:e.isAdmin}])},[(0,i.Lk)("div",{class:"user-card-header",onClick:a=>l.toggleDetails(e)},[(0,i.Lk)("div",_t,[(0,i.Lk)("h3",{class:(0,k.C4)(["username",e.status])},(0,k.v_)(e.username),3),(0,i.Lk)("span",gt,(0,k.v_)(e.role),1)]),(0,i.Lk)("button",vt,[(0,i.Lk)("i",{class:(0,k.C4)(["fas",e.isAdmin?"fa-crown":n.selectedUser?._id===e._id?"fa-chevron-up":"fa-chevron-down"])},null,2)])],8,ht),n.selectedUser?._id===e._id?((0,i.uX)(),(0,i.CE)("div",bt,[(0,i.Lk)("div",ft,[(0,i.Lk)("div",kt,[e.fullName?((0,i.uX)(),(0,i.CE)("div",yt,[a[57]||(a[57]=(0,i.Lk)("i",{class:"fas fa-user"},null,-1)),(0,i.Lk)("p",null,[a[56]||(a[56]=(0,i.Lk)("strong",null,"Full Name:",-1)),(0,i.eW)(" "+(0,k.v_)(e.fullName),1)])])):(0,i.Q3)("",!0),e.email?((0,i.uX)(),(0,i.CE)("div",Lt,[a[59]||(a[59]=(0,i.Lk)("i",{class:"fas fa-envelope"},null,-1)),(0,i.Lk)("p",null,[a[58]||(a[58]=(0,i.Lk)("strong",null,"Email:",-1)),(0,i.eW)(" "+(0,k.v_)(e.email),1)])])):(0,i.Q3)("",!0),e.phoneNumber?((0,i.uX)(),(0,i.CE)("div",wt,[a[61]||(a[61]=(0,i.Lk)("i",{class:"fas fa-phone"},null,-1)),(0,i.Lk)("p",null,[a[60]||(a[60]=(0,i.Lk)("strong",null,"Phone:",-1)),(0,i.eW)(" "+(0,k.v_)(e.phoneNumber),1)])])):(0,i.Q3)("",!0),e.licenseId?((0,i.uX)(),(0,i.CE)("div",Ct,[a[63]||(a[63]=(0,i.Lk)("i",{class:"fas fa-id-card"},null,-1)),(0,i.Lk)("p",null,[a[62]||(a[62]=(0,i.Lk)("strong",null,"License ID:",-1)),(0,i.eW)(" "+(0,k.v_)(e.licenseId),1)])])):(0,i.Q3)("",!0),e.gender?((0,i.uX)(),(0,i.CE)("div",xt,[a[65]||(a[65]=(0,i.Lk)("i",{class:"fas fa-venus-mars"},null,-1)),(0,i.Lk)("p",null,[a[64]||(a[64]=(0,i.Lk)("strong",null,"Gender:",-1)),(0,i.eW)(" "+(0,k.v_)(e.gender),1)])])):(0,i.Q3)("",!0),e.title?((0,i.uX)(),(0,i.CE)("div",It,[a[67]||(a[67]=(0,i.Lk)("i",{class:"fas fa-briefcase"},null,-1)),(0,i.Lk)("p",null,[a[66]||(a[66]=(0,i.Lk)("strong",null,"Title:",-1)),(0,i.eW)(" "+(0,k.v_)(e.title),1)])])):(0,i.Q3)("",!0),e.specialty?((0,i.uX)(),(0,i.CE)("div",Pt,[a[69]||(a[69]=(0,i.Lk)("i",{class:"fas fa-stethoscope"},null,-1)),(0,i.Lk)("p",null,[a[68]||(a[68]=(0,i.Lk)("strong",null,"Specialty:",-1)),(0,i.eW)(" "+(0,k.v_)(e.specialty),1)])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Mt,[(0,i.Lk)("div",Et,[a[70]||(a[70]=(0,i.Lk)("i",{class:"fas fa-at"},null,-1)),(0,i.eW)(" "+(0,k.v_)(e.username),1)]),(0,i.Lk)("div",{class:"avatar-circle",style:(0,k.Tr)({backgroundImage:`url(${e.profilePictureUrl||n.defaultAvatar})`})},null,4),e.isAdmin?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ut,[(0,i.Lk)("button",{class:"edit-button",onClick:a=>l.startEditing(e)},a[71]||(a[71]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1),(0,i.eW)(" Edit ")]),8,At),(0,i.Lk)("button",{class:(0,k.C4)(["status-button","active"===e.status?"active":"inactive"]),onClick:a=>l.handleToggleStatus(e._id)},[(0,i.Lk)("i",{class:(0,k.C4)(["fas","active"===e.status?"fa-toggle-on":"fa-toggle-off"])},null,2),(0,i.eW)(" "+(0,k.v_)("active"===e.status?"Suspend":"Activate"),1)],10,St),(0,i.Lk)("button",{class:"delete-button",onClick:a=>l.handleDeleteUser(e._id)},a[72]||(a[72]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1),(0,i.eW)(" Delete ")]),8,Dt)]))])])])):(0,i.Q3)("",!0),n.editUser&&n.editUser._id===e._id?((0,i.uX)(),(0,i.CE)("div",Xt,[(0,i.Lk)("div",Ft,[a[73]||(a[73]=(0,i.Lk)("label",null,"Full Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[25]||(a[25]=e=>n.editUser.fullName=e),type:"text",class:(0,k.C4)({"invalid-field":n.editSubmitted&&n.editValidation.fullName}),onInput:a[26]||(a[26]=e=>l.handleEditInput("fullName"))},null,34),[[s.Jo,n.editUser.fullName]]),n.editSubmitted&&n.editValidation.fullName?((0,i.uX)(),(0,i.CE)("p",Tt," Full name must contain English letters only ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Nt,[a[74]||(a[74]=(0,i.Lk)("label",null,[(0,i.Lk)("i",{class:"fas fa-lock"}),(0,i.eW)(" Username (read-only)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[27]||(a[27]=e=>n.editUser.username=e),type:"text",readonly:"",class:"readonly-field"},null,512),[[s.Jo,n.editUser.username]])]),(0,i.Lk)("div",Ot,[a[75]||(a[75]=(0,i.Lk)("label",null,"Email",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[28]||(a[28]=e=>n.editUser.email=e),type:"email",class:(0,k.C4)({"invalid-field":n.editSubmitted&&n.editValidation.email}),onInput:a[29]||(a[29]=e=>l.handleEditInput("email"))},null,34),[[s.Jo,n.editUser.email]]),n.editSubmitted&&n.editValidation.email?((0,i.uX)(),(0,i.CE)("p",Rt," Invalid email format ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Vt,[a[76]||(a[76]=(0,i.Lk)("label",null,"Phone Number",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[30]||(a[30]=e=>n.editUser.phoneNumber=e),type:"tel",class:(0,k.C4)({"invalid-field":n.editSubmitted&&n.editValidation.phone}),onInput:a[31]||(a[31]=e=>l.handleEditInput("phone"))},null,34),[[s.Jo,n.editUser.phoneNumber]]),n.editSubmitted&&n.editValidation.phone?((0,i.uX)(),(0,i.CE)("p",Qt," Phone must start with 05 and be 10 digits ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",$t,[a[77]||(a[77]=(0,i.Lk)("label",null,"Medical License ID",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[32]||(a[32]=e=>n.editUser.licenseId=e),type:"text",class:(0,k.C4)({"invalid-field":n.editSubmitted&&n.editValidation.licenseId}),onInput:a[33]||(a[33]=e=>l.handleEditInput("licenseId"))},null,34),[[s.Jo,n.editUser.licenseId]]),n.editSubmitted&&n.editValidation.licenseId?((0,i.uX)(),(0,i.CE)("p",jt," License ID must be unique and contain digits only ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",zt,[a[79]||(a[79]=(0,i.Lk)("label",null,"Title",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[34]||(a[34]=e=>n.editUser.title=e)},[a[78]||(a[78]=(0,i.Lk)("option",{disabled:"",value:""},"Select Title",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.titles,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e},(0,k.v_)(e),1)))),128))],512),[[s.u1,n.editUser.title]])]),(0,i.Lk)("div",Bt,[a[80]||(a[80]=(0,i.Lk)("label",null,"Specialty",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[35]||(a[35]=e=>n.editUser.specialty=e),type:"text",class:(0,k.C4)({"invalid-field":n.editSubmitted&&n.editValidation.specialty}),onInput:a[36]||(a[36]=e=>l.handleEditInput("specialty"))},null,34),[[s.Jo,n.editUser.specialty]]),n.editSubmitted&&n.editValidation.specialty?((0,i.uX)(),(0,i.CE)("p",Wt," Specialty must contain English letters only ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Gt,[(0,i.Lk)("div",Ht,[a[81]||(a[81]=(0,i.Lk)("span",{class:"toggle-label"},"Gender:",-1)),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:"male"===n.editUser.gender}]),onClick:a[37]||(a[37]=e=>n.editUser.gender="male"),type:"button"}," Male ",2),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:"female"===n.editUser.gender}]),onClick:a[38]||(a[38]=e=>n.editUser.gender="female"),type:"button"}," Female ",2)]),(0,i.Lk)("div",qt,[a[82]||(a[82]=(0,i.Lk)("span",{class:"toggle-label"},"Is Admin?",-1)),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:!n.editUser.isAdmin}]),onClick:a[39]||(a[39]=e=>{n.editUser.role="user",n.editUser.isAdmin=!1}),type:"button"}," No ",2),(0,i.Lk)("button",{class:(0,k.C4)(["toggle-button",{selected:n.editUser.isAdmin}]),onClick:a[40]||(a[40]=e=>{n.editUser.role="admin",n.editUser.isAdmin=!0}),type:"button"}," Yes ",2)])]),(0,i.Lk)("div",Jt,[(0,i.Lk)("button",{class:"save-button",onClick:a[41]||(a[41]=(...e)=>l.saveUserEdits&&l.saveUserEdits(...e))},"Save Changes"),(0,i.Lk)("button",{class:"cancel-button",onClick:a[42]||(a[42]=(...e)=>l.cancelEdit&&l.cancelEdit(...e))},"Cancel")]),a[87]||(a[87]=(0,i.Lk)("p",null,null,-1)),(0,i.Lk)("div",Kt,[a[86]||(a[86]=(0,i.Lk)("label",{class:"section-title"},[(0,i.Lk)("i",{class:"fas fa-exclamation-triangle warning-icon"}),(0,i.eW)(" Reset Password ")],-1)),n.showResetConfirmation?((0,i.uX)(),(0,i.CE)("div",is,[a[85]||(a[85]=(0,i.Lk)("p",{class:"confirmation-text"}," â— Are you sure you want to reset the password? ",-1)),(0,i.Lk)("div",rs,[(0,i.Lk)("button",{class:"confirm-btn",onClick:a[47]||(a[47]=e=>l.confirmResetPassword(n.selectedUser._id))},"Yes, Reset"),(0,i.Lk)("button",{class:"cancel-btn",onClick:a[48]||(a[48]=e=>n.showResetConfirmation=!1)},"Cancel")])])):((0,i.uX)(),(0,i.CE)("div",Zt,[n.showSuccessToast?((0,i.uX)(),(0,i.CE)("div",ss," âœ… Password was reset successfully! ")):((0,i.uX)(),(0,i.CE)("div",Yt,[(0,i.Lk)("div",es,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[43]||(a[43]=e=>n.resetPassword=e),type:"text",placeholder:"Enter new password or generate",class:(0,k.C4)({"invalid-field":n.passwordInvalidReset,"valid-field":!n.passwordInvalidReset&&n.resetPassword}),onInput:a[44]||(a[44]=(...e)=>l.validateResetPassword&&l.validateResetPassword(...e))},null,34),[[s.Jo,n.resetPassword]])]),n.passwordInvalidReset?((0,i.uX)(),(0,i.CE)("p",as," Password must be at least 6 characters with valid symbols ")):(0,i.Q3)("",!0),(0,i.Lk)("div",ts,[(0,i.Lk)("button",{class:"generate-btn",onClick:a[45]||(a[45]=(...e)=>l.generateResetPassword&&l.generateResetPassword(...e))},a[83]||(a[83]=[(0,i.Lk)("i",{class:"fas fa-random"},null,-1),(0,i.eW)(" Generate New Password ")])),(0,i.Lk)("button",{class:"save-btn",onClick:a[46]||(a[46]=e=>n.showResetConfirmation=!0)},a[84]||(a[84]=[(0,i.Lk)("i",{class:"fas fa-save"},null,-1),(0,i.eW)(" Save New Password ")]))])]))]))])])):(0,i.Q3)("",!0)],2)))),128))])):(0,i.Q3)("",!0),n.isLoading||l.filteredUsers.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ns,a[88]||(a[88]=[(0,i.Lk)("i",{class:"fas fa-user-slash"},null,-1),(0,i.Lk)("p",null,"No matching users found.",-1),(0,i.Lk)("small",null,"Try checking the username or clearing your search.",-1)])))])):(0,i.Q3)("",!0)])}const os={name:"AdminPanelPage",data(){return{users:[],selectedUser:null,searchQuery:"",isLoading:!1,errorMessage:"",currentView:"list",showAddUserForm:!1,titles:["Mr.","Mrs.","Miss","Ms.","Dr.","Prof.","Rev.","Rabbi","Fr.","Eng.","Adv.","Hon.","Sir","Dame","None"],newUser:{username:"",fullName:"",email:"",phoneNumber:"",gender:"male",role:"user",password:"",profilePictureUrl:""},defaultAvatar:"https://static.vecteezy.com/system/resources/previews/034/466/010/non_2x/cartoon-blood-character-and-medical-doctor-stethoscope-for-health-care-hospital-pulse-heartbeat-design-vector.jpg",usernameAvailable:null,usernameMessage:"",email:"",phoneNumber:"",emailInvalid:!1,phoneInvalid:!1,password:"",passwordInvalid:!1,passwordVisible:!1,licenseIdValid:null,licenseIdInvalid:!1,lastCheckedLicenseId:"",licenseIdNotNumeric:!1,fullNameInvalid:!1,specialtyInvalid:!1,editUser:null,editValidation:{fullName:!1,email:!1,phone:!1,licenseId:!1,specialty:!1},editSubmitted:!1,resetPassword:"",passwordInvalidReset:!1,showResetConfirmation:!1,showSuccessToast:!1}},computed:{filteredUsers(){const e=this.searchQuery.toLowerCase().trim();return e?this.users.filter((a=>a.username&&a.username.toLowerCase().includes(e)||a.fullName&&a.fullName.toLowerCase().includes(e)||a.licenseId&&a.licenseId.toLowerCase().includes(e))):this.users},canSubmit(){const{fullName:e,username:a,password:t,specialty:s,title:i,licenseId:r}=this.newUser;return e&&!this.fullNameInvalid&&a&&!this.usernameHasSpaces&&!this.usernameInvalid&&!0===this.usernameAvailable&&t&&!this.passwordInvalid&&s&&!this.specialtyInvalid&&r&&!this.licenseIdInvalid&&!this.licenseIdNotNumeric&&i&&""!==i}},methods:{toggleDetails(e){this.selectedUser?._id===e._id?(this.selectedUser=null,this.editUser=null,this.editSubmitted=!1,this.editValidation={fullName:!1,email:!1,phone:!1,licenseId:!1,specialty:!1}):this.selectedUser=e},toggleAddUserForm(){this.currentView="addUser"===this.currentView?"list":"addUser"},async handleAddUser(){const e=/^[A-Za-z0-9!@#$%^&*()_+[\]{};':"\\|,.<>/?`~\-]{6,}$/;this.passwordInvalid=!e.test(this.newUser.password);const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;this.emailInvalid=!a.test(this.newUser.email);const t=/^05\d{8}$/;if(this.phoneInvalid=this.newUser.phoneNumber&&!t.test(this.newUser.phoneNumber),this.emailInvalid||this.phoneInvalid||this.passwordInvalid)return void(this.errorMessage="Please correct the highlighted errors.");const s={...this.newUser,isAdmin:"admin"===this.newUser.role};try{const e=await A(s);e.success?(this.fetchUsers(),this.currentView="list",this.newUser={username:"",fullName:"",email:"",phoneNumber:"",gender:"male",role:"user",password:"",profilePictureUrl:"",title:"",licenseId:"",specialty:""},this.emailInvalid=!1,this.phoneInvalid=!1,this.usernameAvailable=null,this.errorMessage=""):this.errorMessage=e.message||"Failed to add user."}catch{this.errorMessage="Failed to add user. Please try again."}},async handleDeleteUser(e){try{const a=await D(e);a.success?this.fetchUsers():this.errorMessage=a.message||"Failed to delete user."}catch{this.errorMessage="Failed to delete user. Please try again."}},async handleToggleStatus(e){try{const a=await S(e);a.success?this.fetchUsers():this.errorMessage=a.message||"Failed to toggle status."}catch{this.errorMessage="Failed to update user status. Please try again."}},async fetchUsers(){this.isLoading=!0;try{this.users=await E()}catch{this.errorMessage="Failed to load users. Please try again."}finally{this.isLoading=!1}},async validateUsername(){if(!this.newUser.username)return this.usernameAvailable=null,this.usernameMessage="",this.usernameHasSpaces=!1,void(this.usernameInvalid=!1);if(/\s/.test(this.newUser.username))return this.usernameHasSpaces=!0,this.usernameAvailable=!1,void(this.usernameMessage="Username cannot contain spaces");if(this.usernameHasSpaces=!1,!/^[a-zA-Z0-9]+$/.test(this.newUser.username))return this.usernameInvalid=!0,this.usernameAvailable=!1,void(this.usernameMessage="Username can only contain English letters and numbers");this.usernameInvalid=!1;const e=this.newUser.username.toLowerCase(),{available:a,message:t}=await N(e);this.usernameAvailable=a,this.usernameMessage=t},isValidEmail(e){const a=/[^\x00-\x7F]/;if(a.test(e))return!1;const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},isValidIsraeliPhone(e){const a=/^05\d{8}$/;return a.test(e)},generatePassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";let a="";for(let t=0;t<10;t++)a+=e.charAt(Math.floor(Math.random()*e.length));this.newUser.password=a,this.validatePassword()},validatePassword(){const e=this.newUser.password;if(!e)return void(this.passwordInvalid=!1);const a=/^[A-Za-z0-9!@#$%^&*()_+[\]{};':"\\|,.<>/?`~\-]{6,}$/;this.passwordInvalid=!a.test(e)},async validateLicenseId(){const e=this.newUser.licenseId.trim();if(!e)return this.licenseIdValid=null,this.licenseIdInvalid=!1,void(this.licenseIdNotNumeric=!1);const a=/^\d+$/;if(!a.test(e))return this.licenseIdValid=null,this.licenseIdInvalid=!1,void(this.licenseIdNotNumeric=!0);if(this.licenseIdNotNumeric=!1,this.lastCheckedLicenseId!==e){this.lastCheckedLicenseId=e;try{const a=await O(e);this.licenseIdValid=a.available,this.licenseIdInvalid=!a.available}catch(t){console.error("Error checking license ID:",t),this.licenseIdValid=null,this.licenseIdInvalid=!1}}},validateFullName(){const e=this.newUser.fullName.trim();if(!e)return void(this.fullNameInvalid=!1);const a=/^[A-Za-z\s]+$/;this.fullNameInvalid=!a.test(e)},validateSpecialty(){const e=/^[A-Za-z\s]+$/;this.specialtyInvalid=this.newUser.specialty&&!e.test(this.newUser.specialty.trim())},togglePassword(){this.passwordVisible=!this.passwordVisible,console.log("passwordVisible:",this.passwordVisible)},startEditing(e){this.editUser=JSON.parse(JSON.stringify(e))},async saveUserEdits(){this.editSubmitted=!0,this.handleEditInput("fullName"),this.handleEditInput("email"),this.handleEditInput("phone"),this.handleEditInput("specialty");const e=await O(this.editUser.licenseId,this.editUser._id);this.editValidation.licenseId=!e.available;const a=Object.values(this.editValidation).some((e=>e));if(a)return;const t={...this.editUser};delete t.password;try{const e=await V(this.editUser._id,t);e.success?(this.editUser=null,this.editSubmitted=!1,await this.fetchUsers()):this.errorMessage=e.message||"Failed to update user."}catch(s){this.errorMessage="Error updating user.",console.error(s)}},isValidEmailValue(e){if(!e)return!0;const a=/[^\x00-\x7F]/,t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return!a.test(e)&&t.test(e)},generateResetPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*()";let a="";for(let t=0;t<10;t++)a+=e.charAt(Math.floor(Math.random()*e.length));this.resetPassword=a,this.validateResetPassword()},validateResetPassword(){const e=/^[A-Za-z0-9!@#$%^&*()_+[\]{};':"\\|,.<>/?`~\-]{6,}$/;this.passwordInvalidReset=!e.test(this.resetPassword)},async resetUserPassword(e){if(this.validateResetPassword(),!this.passwordInvalidReset)try{const a=await R(e,this.resetPassword);a.success?(this.resetPassword="",this.passwordInvalidReset=!1,this.errorMessage="",alert("Password reset successfully!")):this.errorMessage=a.message||"Failed to reset password."}catch(a){this.errorMessage="Error while resetting password.",console.error(a)}},async handleEditInput(e){if(!this.editUser)return;const a=(this.editUser[e]||"").trim();switch(e){case"fullName":this.editValidation.fullName=!/^[A-Za-z\s]+$/.test(a);break;case"email":this.editValidation.email=!this.isValidEmailValue(a);break;case"phone":this.editValidation.phone=!/^05\d{8}$/.test(this.editUser.phoneNumber.trim());break;case"specialty":this.editValidation.specialty=!/^[A-Za-z\s]+$/.test(a);break;case"licenseId":if(this.editValidation.licenseId=!/^\d+$/.test(a),!this.editValidation.licenseId&&a){const e=await O(a,this.editUser._id);this.editValidation.licenseId=!e.available}break}},cancelEdit(){this.editUser=null,this.editSubmitted=!1,this.editValidation={fullName:!1,email:!1,phone:!1,licenseId:!1,specialty:!1}},async confirmResetPassword(e){if(this.validateResetPassword(),this.passwordInvalidReset)this.showResetConfirmation=!1;else try{const a=await R(e,this.resetPassword);a.success?(this.resetPassword="",this.passwordInvalidReset=!1,this.errorMessage="",this.showResetConfirmation=!1,this.showSuccessToast=!0,setTimeout((()=>{this.showSuccessToast=!1,this.showResetConfirmation=!1,this.resetPassword="",this.passwordInvalidReset=!1}),3e3)):(this.errorMessage=a.message||"Failed to reset password.",this.showResetConfirmation=!1)}catch(a){console.error(a),this.errorMessage="Error while resetting password.",this.showResetConfirmation=!1}}},async created(){await this.fetchUsers()}},ds=(0,m.A)(os,[["render",ls],["__scopeId","data-v-03328109"]]),cs=ds,ms={class:"personal-area"},us={class:"profile-wrapper"},ps={key:0},hs={class:"profile-card"},_s={key:0,class:"toast"},gs={class:"profile-header"},vs=["src"],bs={key:0,class:"edit-avatar-overlay"},fs={class:"avatar-filter-tabs"},ks={class:"avatars"},ys=["src","onClick"],Ls={class:"pagination-controls"},ws=["disabled"],Cs={class:"page-indicator"},xs=["disabled"],Is={class:"user-info"},Ps={class:"name"},Ms={class:"username"},Es={class:"profile-info"},Us={class:"info-item"},As={key:0},Ss={class:"info-item readonly"},Ds={key:0},Xs=["disabled"],Fs={class:"info-item readonly"},Ts={key:0},Ns=["readonly"],Os={class:"info-item readonly"},Rs={key:0},Vs={key:1,class:"input-with-message"},Qs=["readonly"],$s={key:0,class:"error-message"},js={class:"info-item"},zs={key:0},Bs={key:0,class:"error-message"},Ws={class:"info-item"},Gs={key:0},Hs={key:1,class:"error-message"},qs={class:"info-item"},Js={key:0},Ks={key:1,class:"profile-card"},Zs={class:"info-item"},Ys={class:"info-item"},ei={class:"info-item"},ai={key:0,class:"password-message"};function ti(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",ms,[(0,i.Lk)("div",us,[a[57]||(a[57]=(0,i.Lk)("h2",{class:"main-title"}," My Profile ",-1)),r.showChangePassword?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ps,[(0,i.Lk)("div",hs,[r.successMessage?((0,i.uX)(),(0,i.CE)("div",_s,(0,k.v_)(r.successMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"edit-button",onClick:a[0]||(a[0]=(...e)=>r.toggleEditMode&&r.toggleEditMode(...e))},[a[26]||(a[26]=(0,i.Lk)("i",{class:"fas fa-edit"},null,-1)),(0,i.eW)(" "+(0,k.v_)(r.editMode?"Cancel":"Edit Profile"),1)]),(0,i.Lk)("div",gs,[(0,i.Lk)("div",{class:"avatar-container",onClick:a[1]||(a[1]=e=>r.editMode?r.showGallery=!0:null)},[(0,i.Lk)("img",{src:r.form.profilePictureUrl||r.defaultAvatar,alt:"User Avatar",class:"avatar"},null,8,vs),r.editMode?((0,i.uX)(),(0,i.CE)("div",bs,a[27]||(a[27]=[(0,i.Lk)("i",{class:"fas fa-camera"},null,-1)]))):(0,i.Q3)("",!0)]),r.showGallery?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"avatar-gallery-overlay",onClick:a[9]||(a[9]=e=>r.showGallery=!1)},[(0,i.Lk)("div",{class:"avatar-gallery",onClick:a[8]||(a[8]=(0,s.D$)((()=>{}),["stop"]))},[a[30]||(a[30]=(0,i.Lk)("h3",{class:"avatar-title"},"Choose an Avatar",-1)),(0,i.Lk)("div",fs,[(0,i.Lk)("button",{onClick:a[2]||(a[2]=e=>r.selectGender("all")),class:(0,k.C4)({active:"all"===r.selectedGenderFilter})},"All",2),(0,i.Lk)("button",{onClick:a[3]||(a[3]=e=>r.selectGender("male")),class:(0,k.C4)({active:"male"===r.selectedGenderFilter})},"Male",2),(0,i.Lk)("button",{onClick:a[4]||(a[4]=e=>r.selectGender("female")),class:(0,k.C4)({active:"female"===r.selectedGenderFilter})},"Female",2)]),(0,i.Lk)("div",ks,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedAvatars,(e=>((0,i.uX)(),(0,i.CE)("img",{key:e.src,src:e.src,class:(0,k.C4)(["avatar-option",{selected:e.src===r.form.profilePictureUrl}]),onClick:a=>r.selectAvatar(e.src)},null,10,ys)))),128))]),(0,i.Lk)("div",Ls,[(0,i.Lk)("button",{class:"nav-arrow",onClick:a[5]||(a[5]=e=>r.changePage(-1)),disabled:0===r.currentPage},a[28]||(a[28]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),8,ws),(0,i.Lk)("span",Cs,"Page "+(0,k.v_)(r.currentPage+1)+" of "+(0,k.v_)(r.totalPages),1),(0,i.Lk)("button",{class:"nav-arrow",onClick:a[6]||(a[6]=e=>r.changePage(1)),disabled:r.currentPage===r.totalPages-1},a[29]||(a[29]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,xs)]),(0,i.Lk)("button",{class:"close-button",onClick:a[7]||(a[7]=e=>r.showGallery=!1)},"Close")])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Is,[(0,i.Lk)("h2",Ps,(0,k.v_)(r.form.fullName),1),(0,i.Lk)("p",Ms,"@"+(0,k.v_)(r.form.username),1)])]),(0,i.Lk)("div",Es,[(0,i.Lk)("div",Us,[a[31]||(a[31]=(0,i.Lk)("i",{class:"fas fa-id-card icon"},null,-1)),a[32]||(a[32]=(0,i.Lk)("label",null,"Full Name",-1)),r.editMode?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":a[10]||(a[10]=e=>r.form.fullName=e),type:"text"},null,512)),[[s.Jo,r.form.fullName]]):((0,i.uX)(),(0,i.CE)("span",As,(0,k.v_)(r.form.fullName),1))]),(0,i.Lk)("div",Ss,[a[34]||(a[34]=(0,i.Lk)("i",{class:"fas fa-user-tie icon"},null,-1)),a[35]||(a[35]=(0,i.Lk)("label",null,"Title",-1)),r.editMode?(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:1,"onUpdate:modelValue":a[11]||(a[11]=e=>r.form.title=e),disabled:!r.isAdminUser,class:(0,k.C4)(r.isAdminUser?"":"readonly-input")},[a[33]||(a[33]=(0,i.Lk)("option",{disabled:"",value:""},"Select Title",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.titles,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e},(0,k.v_)(e),1)))),128))],10,Xs)),[[s.u1,r.form.title]]):((0,i.uX)(),(0,i.CE)("span",Ds,(0,k.v_)(r.formattedTitle),1))]),(0,i.Lk)("div",Fs,[a[36]||(a[36]=(0,i.Lk)("i",{class:"fas fa-stethoscope icon"},null,-1)),a[37]||(a[37]=(0,i.Lk)("label",null,"Specialty",-1)),r.editMode?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,type:"text","onUpdate:modelValue":a[12]||(a[12]=e=>r.form.specialty=e),readonly:!r.isAdminUser,class:(0,k.C4)(r.isAdminUser?"":"readonly-input")},null,10,Ns)),[[s.Jo,r.form.specialty]]):((0,i.uX)(),(0,i.CE)("span",Ts,(0,k.v_)(r.form.specialty),1))]),(0,i.Lk)("div",Os,[a[38]||(a[38]=(0,i.Lk)("i",{class:"fas fa-id-badge icon"},null,-1)),a[39]||(a[39]=(0,i.Lk)("label",null,"License ID",-1)),r.editMode?((0,i.uX)(),(0,i.CE)("div",Vs,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[13]||(a[13]=e=>r.form.licenseId=e),readonly:!r.isAdminUser,onInput:a[14]||(a[14]=(...e)=>r.validateLicenseId&&r.validateLicenseId(...e)),class:(0,k.C4)([r.isAdminUser?r.licenseIdError?"invalid-field":r.licenseIdValid?"valid-field":"":"readonly-input"])},null,42,Qs),[[s.Jo,r.form.licenseId]]),r.licenseIdError?((0,i.uX)(),(0,i.CE)("p",$s,(0,k.v_)(r.licenseIdError),1)):(0,i.Q3)("",!0)])):((0,i.uX)(),(0,i.CE)("span",Rs,(0,k.v_)(r.form.licenseId||"N/A"),1))]),(0,i.Lk)("div",js,[a[40]||(a[40]=(0,i.Lk)("i",{class:"fas fa-envelope icon"},null,-1)),a[41]||(a[41]=(0,i.Lk)("label",null,"Email",-1)),r.editMode?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":a[15]||(a[15]=e=>r.form.email=e),type:"email"},null,512)),[[s.Jo,r.form.email]]):((0,i.uX)(),(0,i.CE)("span",zs,(0,k.v_)(r.form.email||"N/A"),1))]),r.emailErrorMessage?((0,i.uX)(),(0,i.CE)("p",Bs,(0,k.v_)(r.emailErrorMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",Ws,[a[42]||(a[42]=(0,i.Lk)("i",{class:"fas fa-phone icon"},null,-1)),a[43]||(a[43]=(0,i.Lk)("label",null,"Phone Number",-1)),r.editMode?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":a[16]||(a[16]=e=>r.form.phoneNumber=e),type:"tel",inputmode:"numeric",pattern:"^05\\d{8}$",placeholder:"05XXXXXXXX",class:"phone-input",onInput:a[17]||(a[17]=(...e)=>r.validatePhoneNumber&&r.validatePhoneNumber(...e))},null,544)),[[s.Jo,r.form.phoneNumber]]):((0,i.uX)(),(0,i.CE)("span",Gs,(0,k.v_)(r.form.phoneNumber||"N/A"),1))]),r.phoneErrorMessage?((0,i.uX)(),(0,i.CE)("p",Hs,(0,k.v_)(r.phoneErrorMessage),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",qs,[a[45]||(a[45]=(0,i.Lk)("i",{class:"fas fa-venus-mars icon"},null,-1)),a[46]||(a[46]=(0,i.Lk)("label",null,"Gender",-1)),r.editMode?(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:1,"onUpdate:modelValue":a[18]||(a[18]=e=>r.form.gender=e)},a[44]||(a[44]=[(0,i.Lk)("option",{value:"male"},"Male",-1),(0,i.Lk)("option",{value:"female"},"Female",-1)]),512)),[[s.u1,r.form.gender]]):((0,i.uX)(),(0,i.CE)("span",Js,(0,k.v_)(r.form.gender),1))])]),r.editMode?((0,i.uX)(),(0,i.CE)("button",{key:1,class:"save-button",onClick:a[19]||(a[19]=(...e)=>r.updateProfile&&r.updateProfile(...e))},a[47]||(a[47]=[(0,i.Lk)("i",{class:"fas fa-save"},null,-1),(0,i.eW)(" Save Changes ")]))):(0,i.Q3)("",!0),r.editMode?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:2,class:"change-password-button",onClick:a[20]||(a[20]=e=>r.showChangePassword=!0)},a[48]||(a[48]=[(0,i.Lk)("i",{class:"fas fa-key"},null,-1),(0,i.eW)(" Change Password ")])))])])),r.showChangePassword?((0,i.uX)(),(0,i.CE)("div",Ks,[a[56]||(a[56]=(0,i.Lk)("h2",{class:"name"},"Change Password",-1)),(0,i.Lk)("button",{class:"back-button",onClick:a[21]||(a[21]=e=>r.showChangePassword=!1)},a[49]||(a[49]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,i.eW)(" Back ")])),(0,i.Lk)("div",Zs,[a[50]||(a[50]=(0,i.Lk)("i",{class:"fas fa-lock icon"},null,-1)),a[51]||(a[51]=(0,i.Lk)("label",null,"Current Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password","onUpdate:modelValue":a[22]||(a[22]=e=>r.passwordForm.currentPassword=e)},null,512),[[s.Jo,r.passwordForm.currentPassword]])]),(0,i.Lk)("div",Ys,[a[52]||(a[52]=(0,i.Lk)("i",{class:"fas fa-key icon"},null,-1)),a[53]||(a[53]=(0,i.Lk)("label",null,"New Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password","onUpdate:modelValue":a[23]||(a[23]=e=>r.passwordForm.newPassword=e)},null,512),[[s.Jo,r.passwordForm.newPassword]])]),(0,i.Lk)("div",ei,[a[54]||(a[54]=(0,i.Lk)("i",{class:"fas fa-check icon"},null,-1)),a[55]||(a[55]=(0,i.Lk)("label",null,"Confirm New Password",-1)),(0,i.bo)((0,i.Lk)("input",{type:"password","onUpdate:modelValue":a[24]||(a[24]=e=>r.passwordForm.confirmPassword=e)},null,512),[[s.Jo,r.passwordForm.confirmPassword]])]),(0,i.Lk)("button",{class:"save-button",onClick:a[25]||(a[25]=(...e)=>r.changePassword&&r.changePassword(...e))},"Update Password"),r.passwordMessage?((0,i.uX)(),(0,i.CE)("p",ai,(0,k.v_)(r.passwordMessage),1)):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)])])}const si={name:"PersonalArea",setup(e,{emit:a}){const t=localStorage.getItem("userId"),s=localStorage.getItem("token"),r=(0,P.KR)(!1),n=["Mr.","Mrs.","Miss","Ms.","Dr.","Prof.","Rev.","Rabbi","Fr.","Eng.","Adv.","Hon.","Sir","Dame","None"],l=(0,P.KR)(null),o=(0,P.KR)(""),d=(0,P.KR)(""),c=(0,P.KR)({profilePictureUrl:"",username:"",fullName:"",email:"",phoneNumber:"",specialty:"",title:"",licenseId:"",gender:""}),m=(0,P.KR)(!1),u="https://static.vecteezy.com/system/resources/previews/034/466/010/non_2x/cartoon-blood-character-and-medical-doctor-stethoscope-for-health-care-hospital-pulse-heartbeat-design-vector.jpg",p=(0,i.EW)((()=>{const e={"Mr.":"Mister","Mrs.":"Mistress",Miss:"Miss","Ms.":"Ms.","Dr.":"Doctor","Prof.":"Professor","Rev.":"Reverend",Rabbi:"Rabbi","Fr.":"Father","Eng.":"Engineer","Adv.":"Advocate","Hon.":"Honorable",Sir:"Sir",Dame:"Dame",None:"N/A"};return e[c.value.title]||"N/A"})),h=async()=>{if(t&&s)try{const e=await X(t,s);c.value={...e},r.value=!0===e.isAdmin}catch(e){console.error("âŒ Error fetching user profile:",e)}},_=()=>{m.value=!m.value},g=async()=>{if(!t||!s)return;S.value="",D.value="";const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e.test(c.value.email))return void(D.value="Please enter a valid email address.");const i=/^05\d{8}$/;if(!c.value.phoneNumber||i.test(c.value.phoneNumber))try{const e={fullName:c.value.fullName,email:c.value.email,phoneNumber:c.value.phoneNumber||"",gender:c.value.gender,profilePictureUrl:c.value.profilePictureUrl};r.value&&(e.title=c.value.title,e.specialty=c.value.specialty,e.licenseId=c.value.licenseId);const i=await F(t,e,s);i.user&&(c.value={...i.user},m.value=!1,A.value="Profile updated successfully! ðŸŽ‰",a("profile-updated",i.user),setTimeout((()=>{A.value=""}),3e3))}catch(n){console.error("âŒ Error updating profile:",n)}else S.value="âŒ Invalid phone number. Please enter a valid Israeli number in the format 05XXXXXXXX."},v=async()=>{const e=c.value.licenseId.trim();if(!e)return l.value=null,void(o.value="");const a=/^\d+$/;if(!a.test(e))return o.value="License ID must contain digits only âŒ",void(l.value=!1);if(d.value!==e){d.value=e;try{const a=await O(e,t);l.value=a.available,o.value=a.available?"":"This License ID already exists âŒ"}catch(s){o.value="Error checking license ID âŒ",l.value=!1}}},b=()=>{c.value.phoneNumber=c.value.phoneNumber.replace(/\D/g,"")},f=(0,P.KR)(!1),k=(0,P.KR)([{src:"/images/avatars/female1.webp",gender:"female"},{src:"/images/avatars/male1.jpg",gender:"male"},{src:"/images/avatars/female2.png",gender:"female"},{src:"/images/avatars/male2.png",gender:"male"},{src:"/images/avatars/female3.jpeg",gender:"female"},{src:"/images/avatars/male3.png",gender:"male"},{src:"/images/avatars/female4.png",gender:"female"},{src:"/images/avatars/male4.png",gender:"male"},{src:"/images/avatars/female5.png",gender:"female"},{src:"https://static.vecteezy.com/system/resources/previews/027/312/349/non_2x/portrait-of-a-surgeon-isolated-essential-workers-avatar-icons-characters-for-social-media-and-networking-user-profile-website-and-app-3d-render-illustration-png.png",gender:"male"},{src:"/images/avatars/female6.jpg",gender:"female"},{src:"/images/avatars/male6.webp",gender:"male"},{src:"/images/avatars/female7.jpg",gender:"female"},{src:"https://png.pngtree.com/png-clipart/20240321/original/pngtree-avatar-job-doctor-flat-portrait-of-man-png-image_14640094.png",gender:"male"},{src:"/images/avatars/female8.png",gender:"female"},{src:"/images/avatars/male8.png",gender:"male"},{src:"https://static.vecteezy.com/system/resources/previews/034/466/010/non_2x/cartoon-blood-character-and-medical-doctor-stethoscope-for-health-care-hospital-pulse-heartbeat-design-vector.jpg",gender:["male","female"]},{src:"/images/avatars/female9.jpg",gender:"female"},{src:"/images/avatars/male9.jpeg",gender:"male"},{src:"/images/avatars/male10.png",gender:"male"},{src:"/images/avatars/male11.webp",gender:"male"},{src:"/images/avatars/female12.webp",gender:"female"},{src:"/images/avatars/male14.jpg",gender:"male"},{src:"/images/avatars/male15.webp",gender:"male"},{src:"/images/avatars/male16.webp",gender:"male"},{src:"/images/avatars/female17.webp",gender:"female"},{src:"/images/avatars/male17.webp",gender:"male"},{src:"/images/avatars/female18.webp",gender:"female"},{src:"/images/avatars/female19.webp",gender:"female"},{src:"/images/avatars/female20.webp",gender:"female"}]),y=(0,P.KR)("all"),L=(0,P.KR)(0),w=12,C=(0,i.EW)((()=>"all"===y.value?k.value:k.value.filter((e=>{const a=Array.isArray(e.gender)?e.gender:[e.gender];return a.includes(y.value)})))),x=(0,i.EW)((()=>Math.ceil(C.value.length/w))),I=(0,i.EW)((()=>{const e=L.value*w;return C.value.slice(e,e+w)})),M=e=>{y.value=e,L.value=0},E=e=>{const a=L.value+e;a>=0&&a<x.value&&(L.value=a)},U=e=>{c.value.profilePictureUrl=e,f.value=!1},A=(0,P.KR)(""),S=(0,P.KR)(""),D=(0,P.KR)(""),N=(0,P.KR)(!1),R=(0,P.KR)({currentPassword:"",newPassword:"",confirmPassword:""}),V=(0,P.KR)(""),Q=async()=>{if(t&&s)if(R.value.currentPassword&&R.value.newPassword&&R.value.confirmPassword)if(R.value.newPassword===R.value.confirmPassword)if(R.value.newPassword.length<6)V.value="âš ï¸ Password must be at least 6 characters.";else try{const e=await T(t,R.value.currentPassword,R.value.newPassword);e.success?(V.value="âœ… Password changed successfully!",setTimeout((()=>{V.value="",N.value=!1}),3e3)):V.value="âŒ "+(e.message||"Something went wrong.")}catch(e){V.value="âŒ "+(e.message||"Server error")}else V.value="âŒ Passwords do not match!";else V.value="âš ï¸ All fields are required."};return(0,i.sV)((async()=>{await h()})),{form:c,editMode:m,defaultAvatar:u,formattedTitle:p,toggleEditMode:_,updateProfile:g,validatePhoneNumber:b,avatarOptions:k,selectAvatar:U,showGallery:f,successMessage:A,showChangePassword:N,passwordForm:R,passwordMessage:V,changePassword:Q,selectedGenderFilter:y,currentPage:L,paginatedAvatars:I,totalPages:x,selectGender:M,changePage:E,phoneErrorMessage:S,emailErrorMessage:D,isAdminUser:r,titles:n,validateLicenseId:v,licenseIdValid:l,licenseIdError:o}}},ii=(0,m.A)(si,[["render",ti],["__scopeId","data-v-2c2b77c6"]]),ri=ii,ni={name:"MainPage",components:{AdminPanel:cs,Login:j,Dashboard:ra,InfoPanel:va,PatientList:Aa,PersonalArea:ri},data(){return{isLoggedIn:!1,userDetails:null,selectedPanel:"Home"}},created(){const e=localStorage.getItem("userDetails");e&&(this.userDetails=JSON.parse(e),this.isLoggedIn=!0),d.on("token-expired",this.handleLogout)},beforeUnmount(){d.off("token-expired",this.handleLogout)},methods:{handleLogin(e){localStorage.setItem("userDetails",JSON.stringify(e)),this.userDetails=e,this.isLoggedIn=!0,this.selectedPanel="Home"},handleLogout(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userDetails"),this.userDetails=null,this.isLoggedIn=!1,this.selectedPanel="Home",this.$router.push("/")},changePanel(e){this.selectedPanel=e},handleProfileUpdate(e){this.userDetails={...e},localStorage.setItem("userDetails",JSON.stringify(e))}}},li=(0,m.A)(ni,[["render",f]]),oi=li,di={class:"global-page"},ci={class:"main-content"},mi={class:"graph-section"};function ui(e,a,t,r,n,l){const o=(0,i.g2)("MenuBar"),d=(0,i.g2)("FeatureMetric"),c=(0,i.g2)("GraphControls"),m=(0,i.g2)("GraphContainer");return(0,i.uX)(),(0,i.CE)("div",di,[(0,i.bF)(o),(0,i.Lk)("div",ci,[(0,i.Lk)("section",{class:(0,k.C4)(["feature-section",{collapsed:n.isFeatureCollapsed}])},[(0,i.Lk)("button",{class:"collapse-btn",onClick:a[0]||(a[0]=(...e)=>l.toggleFeatureSection&&l.toggleFeatureSection(...e))},[(0,i.Lk)("i",{class:(0,k.C4)(["fas fa-chevron-left",{rotated:n.isFeatureCollapsed}])},null,2)]),(0,i.bo)((0,i.bF)(d,null,null,512),[[s.aG,!n.isFeatureCollapsed]])],2),(0,i.Lk)("section",mi,[(0,i.bF)(c,{graphTypes:n.graphTypes,activeType:n.activeGraphType,onUpdateType:l.updateGraphType},null,8,["graphTypes","activeType","onUpdateType"]),(0,i.bF)(m,{type:n.activeGraphType,data:l.filteredData},null,8,["type","data"])])])])}const pi={class:"sidebar"},hi={class:"sidebar-nav"},_i={class:"menu-bar"},gi={key:0,class:"search-bar-wrapper"},vi={class:"search-input-wrapper"},bi={class:"user-menu-wrapper"},fi=["src"],ki={class:"greeting"},yi={key:0,class:"material-icons arrow-icon"},Li={key:0,class:"user-dropdown"},wi={key:0};function Ci(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.bF)(s.eB,{name:"slide"},{default:(0,i.k6)((()=>[r.isSidebarOpen?((0,i.uX)(),(0,i.CE)("aside",{key:0,class:"sidebar-overlay",onClick:a[4]||(a[4]=(0,s.D$)((e=>r.isSidebarOpen=!1),["self"]))},[(0,i.Lk)("div",pi,[(0,i.Lk)("nav",hi,[(0,i.Lk)("a",{href:"/",class:"sidebar-item",onClick:a[0]||(a[0]=e=>r.isSidebarOpen=!1)},a[11]||(a[11]=[(0,i.Lk)("i",{class:"material-icons"},"home",-1),(0,i.eW)(" Home ")])),(0,i.Lk)("a",{href:"/about",class:"sidebar-item",onClick:a[1]||(a[1]=e=>r.isSidebarOpen=!1)},a[12]||(a[12]=[(0,i.Lk)("i",{class:"material-icons"},"info",-1),(0,i.eW)(" About ")])),(0,i.Lk)("a",{href:"/help",class:"sidebar-item",onClick:a[2]||(a[2]=e=>r.isSidebarOpen=!1)},a[13]||(a[13]=[(0,i.Lk)("i",{class:"material-icons"},"help_outline",-1),(0,i.eW)(" Help ")])),(0,i.Lk)("a",{href:"/contact",class:"sidebar-item",onClick:a[3]||(a[3]=e=>r.isSidebarOpen=!1)},a[14]||(a[14]=[(0,i.Lk)("i",{class:"material-icons"},"mail_outline",-1),(0,i.eW)(" Contact ")]))])])])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("header",_i,[(0,i.Lk)("button",{class:"hamburger",onClick:a[5]||(a[5]=e=>r.isSidebarOpen=!r.isSidebarOpen)},a[15]||(a[15]=[(0,i.Lk)("i",{class:"material-icons"},"menu",-1)])),r.user?((0,i.uX)(),(0,i.CE)("div",gi,[(0,i.Lk)("div",vi,[a[16]||(a[16]=(0,i.Lk)("i",{class:"material-icons search-icon"},"search",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":a[6]||(a[6]=e=>r.searchText=e),type:"text",placeholder:"Search patient ID...",onKeyup:a[7]||(a[7]=(0,s.jR)(((...e)=>r.submitSearch&&r.submitSearch(...e)),["enter"]))},null,544),[[s.Jo,r.searchText]])]),(0,i.Lk)("button",{class:"search-btn",onClick:a[8]||(a[8]=(...e)=>r.submitSearch&&r.submitSearch(...e))}," Go ")])):(0,i.Q3)("",!0),a[21]||(a[21]=(0,i.Lk)("div",{class:"logo-wrapper"},[(0,i.Lk)("span",{class:"logo-text"},"ICU MediClear")],-1)),(0,i.Lk)("div",bi,[(0,i.Lk)("button",{class:"user-menu",onClick:a[9]||(a[9]=(...e)=>r.toggleUserDropdown&&r.toggleUserDropdown(...e))},[(0,i.Lk)("img",{class:"avatar-thumb",src:r.user?.profilePictureUrl||r.defaultAvatar,alt:"avatar"},null,8,fi),(0,i.Lk)("span",ki," Hello, "+(0,k.v_)(r.user?.fullName||"Guest"),1),r.user?((0,i.uX)(),(0,i.CE)("i",yi,(0,k.v_)(r.isUserDropdownOpen?"expand_less":"expand_more"),1)):(0,i.Q3)("",!0)]),(0,i.bF)(s.eB,{name:"fade"},{default:(0,i.k6)((()=>[r.isUserDropdownOpen&&r.user?((0,i.uX)(),(0,i.CE)("ul",Li,[a[19]||(a[19]=(0,i.Lk)("li",null,[(0,i.Lk)("i",{class:"material-icons"},"account_circle"),(0,i.eW)(" Profile")],-1)),r.user?.isAdmin?((0,i.uX)(),(0,i.CE)("li",wi,a[17]||(a[17]=[(0,i.Lk)("i",{class:"material-icons"},"admin_panel_settings",-1),(0,i.eW)(" Admin Panel")]))):(0,i.Q3)("",!0),a[20]||(a[20]=(0,i.Lk)("li",null,[(0,i.Lk)("i",{class:"material-icons"},"settings"),(0,i.eW)(" Settings")],-1)),(0,i.Lk)("li",{onClick:a[10]||(a[10]=(...e)=>r.handleLogout&&r.handleLogout(...e))},a[18]||(a[18]=[(0,i.Lk)("i",{class:"material-icons"},"logout",-1),(0,i.eW)(" Logout ")]))])):(0,i.Q3)("",!0)])),_:1})])])])}const xi={name:"MenuBar",emits:["search"],setup(e,{emit:a}){const t=(0,P.KR)(""),s=(0,P.KR)(!1),r=(0,P.KR)(!1),n=(0,P.KR)(null),l="https://cdn-icons-png.flaticon.com/512/6073/6073873.png",o=(0,h.rd)(),c=()=>{r.value=!r.value},m=()=>{const e=t.value.trim();e&&(a("search",e),t.value="","/local"!==o.currentRoute.value.path&&o.push({path:"/local",query:{patientId:e}}))},u=async()=>{const e=localStorage.getItem("userId"),a=localStorage.getItem("token");if(e&&a)try{const t=await X(e,a);n.value=t}catch(t){console.error("âŒ Failed to load user:",t)}},p=()=>{d.emit("token-expired")};return(0,i.sV)(u),{user:n,defaultAvatar:l,searchText:t,submitSearch:m,toggleUserDropdown:c,isUserDropdownOpen:r,isSidebarOpen:s,handleLogout:p}}},Ii=(0,m.A)(xi,[["render",Ci],["__scopeId","data-v-1b2067fa"]]),Pi=Ii,Mi={class:"feature-metric"},Ei={class:"header"},Ui={class:"toggle-container"},Ai={class:"switch"},Si={class:"feature-list"},Di={class:"feature-name"};function Xi(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",Mi,[(0,i.Lk)("div",Ei,[a[3]||(a[3]=(0,i.Lk)("h2",null,"Feature Metric:",-1)),(0,i.Lk)("div",Ui,[a[2]||(a[2]=(0,i.Lk)("span",{class:"toggle-label"},"Agreement",-1)),(0,i.Lk)("label",Ai,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>n.showAgreement=e)},null,512),[[s.lH,n.showAgreement]]),a[1]||(a[1]=(0,i.Lk)("span",{class:"slider round"},null,-1))])])]),(0,i.Lk)("ul",Si,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.displayedFeatures,(e=>((0,i.uX)(),(0,i.CE)("li",{key:e.name},[(0,i.Lk)("span",Di,(0,k.v_)(e.name),1),(0,i.Lk)("span",{class:(0,k.C4)(["feature-value",n.showAgreement?"agreement":"disagreement"])},(0,k.v_)(n.showAgreement?e.agreement:e.disagreement)+"% ",3)])))),128))])])}const Fi=JSON.parse('{"q":[{"name":"Age","agreement":94,"disagreement":6},{"name":"Ventilated Apache","agreement":93,"disagreement":7},{"name":"Apache 3j Diagnosis","agreement":91,"disagreement":9},{"name":"GCS Motor Apache","agreement":89,"disagreement":11},{"name":"D1 SPO2 Min","agreement":87,"disagreement":13},{"name":"D1 Heartrate Max","agreement":88,"disagreement":12},{"name":"D1 BUN Max","agreement":86,"disagreement":14},{"name":"D1 Heartrate Min","agreement":87,"disagreement":13},{"name":"D1 Resprate Max","agreement":85,"disagreement":15},{"name":"D1 SysBP Min","agreement":86,"disagreement":14},{"name":"ICU ID","agreement":85,"disagreement":15},{"name":"GCS Verbal Apache","agreement":86,"disagreement":14},{"name":"D1 BUN Min","agreement":85,"disagreement":15},{"name":"Pre ICU LOS Days","agreement":83,"disagreement":17},{"name":"Urineoutput Apache","agreement":84,"disagreement":16},{"name":"D1 Lactate Min","agreement":82,"disagreement":18},{"name":"Apache 3j Bodysystem","agreement":83,"disagreement":17},{"name":"BMI","agreement":81,"disagreement":19},{"name":"D1 Temp Min","agreement":84,"disagreement":16},{"name":"D1 Resprate Min","agreement":80,"disagreement":20},{"name":"GCS Eyes Apache","agreement":82,"disagreement":18},{"name":"D1 Temp Max","agreement":81,"disagreement":19},{"name":"D1 WBC Min","agreement":79,"disagreement":21},{"name":"D1 Platelets Min","agreement":82,"disagreement":18},{"name":"Elective Surgery","agreement":70,"disagreement":30},{"name":"D1 Hemaglobin Min","agreement":80,"disagreement":20},{"name":"D1 MBP Min","agreement":70,"disagreement":30},{"name":"D1 Sodium Max","agreement":71,"disagreement":29},{"name":"Apache 2 Diagnosis","agreement":68,"disagreement":32},{"name":"D1 Albumin Min","agreement":69,"disagreement":31},{"name":"D1 Hemaglobin Max","agreement":66,"disagreement":34},{"name":"H1 Heartrate Min","agreement":68,"disagreement":32},{"name":"H1 Heartrate Max","agreement":65,"disagreement":35},{"name":"D1 Arterial PH Min","agreement":60,"disagreement":40},{"name":"D1 Arterial PCO2 Min","agreement":62,"disagreement":38},{"name":"H1 Resprate Min","agreement":58,"disagreement":42},{"name":"D1 PaO2FiO2Ratio Min","agreement":54,"disagreement":46},{"name":"D1 Glucose Min","agreement":56,"disagreement":44},{"name":"Heart Rate Apache","agreement":55,"disagreement":45},{"name":"H1 Temp Min","agreement":53,"disagreement":47},{"name":"Apache 2 Bodysystem","agreement":50,"disagreement":50},{"name":"Hospital Admit Source","agreement":60,"disagreement":40},{"name":"D1 PaO2FiO2Ratio Max","agreement":62,"disagreement":38},{"name":"Hospital ID","agreement":54,"disagreement":46},{"name":"D1 SysBP Max","agreement":65,"disagreement":35},{"name":"D1 INR Max","agreement":52,"disagreement":48},{"name":"Resprate Apache","agreement":60,"disagreement":40},{"name":"D1 WBC Max","agreement":58,"disagreement":42},{"name":"ICU Type","agreement":49,"disagreement":51},{"name":"D1 SysBP Noninvasive Max","agreement":57,"disagreement":43},{"name":"D1 Creatinine Min","agreement":55,"disagreement":45},{"name":"D1 Creatinine Max","agreement":48,"disagreement":52},{"name":"Solid Tumor with Metastasis","agreement":46,"disagreement":54},{"name":"Creatinine Apache","agreement":53,"disagreement":47},{"name":"D1 Lactate Max","agreement":44,"disagreement":56},{"name":"D1 Calcium Max","agreement":52,"disagreement":48},{"name":"Temp Apache","agreement":50,"disagreement":50},{"name":"D1 SysBP Noninvasive Min","agreement":41,"disagreement":59},{"name":"ICU Admit Source","agreement":50,"disagreement":50},{"name":"D1 Potassium Min","agreement":43,"disagreement":57}]}'),Ti={name:"FeatureMetric",data(){return{features:Fi.q,showAgreement:!0}},computed:{displayedFeatures(){return this.features.sort(((e,a)=>this.showAgreement?a.agreement-e.agreement:a.disagreement-e.disagreement))}}},Ni=(0,m.A)(Ti,[["render",Xi],["__scopeId","data-v-7e3a28f6"]]),Oi=Ni,Ri={class:"graph-container"},Vi={class:"chart-wrapper"},Qi={key:5,class:"empty-graph"};function $i(e,a,t,s,r,n){const l=(0,i.g2)("BarChart"),o=(0,i.g2)("LineChart"),d=(0,i.g2)("LimeChart"),c=(0,i.g2)("PieChart"),m=(0,i.g2)("RadarChart");return(0,i.uX)(),(0,i.CE)("div",Ri,[(0,i.Lk)("div",Vi,["Bar"===t.type?((0,i.uX)(),(0,i.Wv)(l,{key:0,data:t.data,class:"chart"},null,8,["data"])):"Line"===t.type?((0,i.uX)(),(0,i.Wv)(o,{key:1,data:t.data,class:"chart"},null,8,["data"])):"LIME"===t.type?((0,i.uX)(),(0,i.Wv)(d,{key:2,data:t.data,class:"chart"},null,8,["data"])):"Pie"===t.type?((0,i.uX)(),(0,i.Wv)(c,{key:3,data:t.data,class:"chart"},null,8,["data"])):"Radar"===t.type?((0,i.uX)(),(0,i.Wv)(m,{key:4,data:t.data,class:"chart"},null,8,["data"])):((0,i.uX)(),(0,i.CE)("div",Qi,"×œ× × ×‘×—×¨ ×’×¨×£ ×œ×”×¦×’×”"))])])}const ji={class:"bar-chart-container"},zi={class:"search-bar"},Bi={class:"controls"},Wi={ref:"chart",class:"chart"};function Gi(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",ji,[(0,i.Lk)("div",zi,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>n.searchQuery=e),onInput:a[1]||(a[1]=(...e)=>l.filterChart&&l.filterChart(...e)),placeholder:"Search Feature...",class:"search-input"},null,544),[[s.Jo,n.searchQuery]])]),(0,i.Lk)("div",Bi,[(0,i.Lk)("button",{onClick:a[2]||(a[2]=(...e)=>l.zoomIn&&l.zoomIn(...e)),class:"zoom-button",title:"Zoom In"},a[4]||(a[4]=[(0,i.Lk)("i",{class:"fas fa-search-plus"},null,-1)])),(0,i.Lk)("button",{onClick:a[3]||(a[3]=(...e)=>l.zoomOut&&l.zoomOut(...e)),class:"zoom-button",title:"Zoom Out"},a[5]||(a[5]=[(0,i.Lk)("i",{class:"fas fa-search-minus"},null,-1)]))]),(0,i.Lk)("div",Wi,null,512)])}var Hi=t(680);const qi={name:"BarChart",props:{data:Object},data(){return{searchQuery:"",filteredData:null}},mounted(){this.filteredData={...this.data},this.initChart(),window.addEventListener("resize",this.resizeChart)},beforeUnmount(){window.removeEventListener("resize",this.resizeChart),this.destroyChart()},methods:{initChart(){if(!this.filteredData||!this.$refs.chart)return;const e=Object.keys(this.filteredData.SHAP),a={SHAP:Object.values(this.filteredData.SHAP),FBT:Object.values(this.filteredData.FBT),"Logistic Regression":Object.values(this.filteredData["Logistic Regression"]),"Decision Tree":Object.values(this.filteredData["Decision Tree"]),Lime:Object.values(this.filteredData.Lime)},t=Math.max(25*e.length,400);this.$refs.chart.style.height=`${t}px`,this.chart=Hi.Ts(this.$refs.chart);const s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:Object.keys(a),top:"10px"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category",data:e},series:Object.entries(a).map((([e,a],t)=>({name:e,type:"bar",data:a,itemStyle:{color:["#c0392b","#8e44ad","#f39c12","#3498db","#2ecc71"][t]}}))),dataZoom:[{type:"slider",yAxisIndex:0,filterMode:"filter",start:0,end:5}]};this.chart.setOption(s)},filterChart(){if(!this.data)return;const e=this.searchQuery.toLowerCase(),a=Object.keys(this.data.SHAP).filter((a=>a.toLowerCase().includes(e)));this.filteredData={SHAP:this.filterSeries(this.data.SHAP,a),FBT:this.filterSeries(this.data.FBT,a),"Logistic Regression":this.filterSeries(this.data["Logistic Regression"],a),"Decision Tree":this.filterSeries(this.data["Decision Tree"],a),Lime:this.filterSeries(this.data.Lime,a)},this.initChart()},filterSeries(e,a){return a.reduce(((a,t)=>(a[t]=e[t],a)),{})},zoomIn(){if(this.chart){const e=this.chart.getOption().dataZoom?.[0];this.chart.dispatchAction({type:"dataZoom",start:0,end:Math.max(e.end-5,0)})}},zoomOut(){if(this.chart){const e=this.chart.getOption().dataZoom?.[0];this.chart.dispatchAction({type:"dataZoom",start:0,end:Math.min(e.end+5,100)})}},resizeChart(){this.chart?.resize()},destroyChart(){this.chart?.dispose(),this.chart=null}}},Ji=(0,m.A)(qi,[["render",Gi]]),Ki=Ji,Zi={class:"line-chart-container"},Yi={class:"controls"},er={ref:"chart",class:"chart"};function ar(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",Zi,[(0,i.Lk)("div",Yi,[(0,i.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>n.zoomIn&&n.zoomIn(...e)),class:"zoom-button"},a[2]||(a[2]=[(0,i.Lk)("i",{class:"fas fa-search-plus"},null,-1)])),(0,i.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>n.zoomOut&&n.zoomOut(...e)),class:"zoom-button"},a[3]||(a[3]=[(0,i.Lk)("i",{class:"fas fa-search-minus"},null,-1)]))]),(0,i.Lk)("div",er,null,512)])}const tr={name:"LineChart",props:{data:Object},mounted(){this.initChart(),window.addEventListener("resize",this.resizeChart)},beforeDestroy(){window.removeEventListener("resize",this.resizeChart),this.destroyChart()},methods:{initChart(){if(!this.data||!this.$refs.chart)return;const e=Object.keys(this.data.SHAP),a=[{name:"SHAP",type:"line",data:Object.values(this.data.SHAP),smooth:!0,lineStyle:{color:"#3498db"},itemStyle:{color:"#3498db"}},{name:"FBT",type:"line",data:Object.values(this.data.FBT),smooth:!0,lineStyle:{color:"#e74c3c"},itemStyle:{color:"#e74c3c"}},{name:"Logistic Regression",type:"line",data:Object.values(this.data["Logistic Regression"]),smooth:!0,lineStyle:{color:"#2ecc71"},itemStyle:{color:"#2ecc71"}},{name:"Decision Tree",type:"line",data:Object.values(this.data["Decision Tree"]),smooth:!0,lineStyle:{color:"#9b59b6"},itemStyle:{color:"#9b59b6"}},{name:"Lime",type:"line",data:Object.values(this.data.Lime),smooth:!0,lineStyle:{color:"#f1c40f"},itemStyle:{color:"#f1c40f"}}];this.chart=Hi.Ts(this.$refs.chart);const t={tooltip:{trigger:"axis"},legend:{top:"10px",data:["SHAP","FBT","Logistic Regression","Decision Tree","Lime"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:e,axisLabel:{interval:0,rotate:45}},yAxis:{type:"value"},dataZoom:[{type:"slider",xAxisIndex:0,filterMode:"filter",start:0,end:10}],series:a};this.chart.setOption(t)},zoomIn(){const e=this.chart.getOption().dataZoom[0];let{start:a,end:t}=e;const s=5,i=Math.min(a+s,t-10),r=Math.max(t-s,a+10);r>i&&this.chart.dispatchAction({type:"dataZoom",start:i,end:r})},zoomOut(){const e=this.chart.getOption().dataZoom[0];let{start:a,end:t}=e;const s=5,i=Math.max(a-s,0),r=Math.min(t+s,100);this.chart.dispatchAction({type:"dataZoom",start:i,end:r})},resizeChart(){this.chart&&this.chart.resize()},destroyChart(){this.chart&&(this.chart.dispose(),this.chart=null)}}},sr=(0,m.A)(tr,[["render",ar]]),ir=sr,rr={class:"lime-chart-container"},nr={class:"controls"},lr={ref:"chart",class:"chart"};function or(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",rr,[(0,i.Lk)("div",nr,[(0,i.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>n.zoomIn&&n.zoomIn(...e)),class:"zoom-button"},a[2]||(a[2]=[(0,i.Lk)("i",{class:"fas fa-search-plus"},null,-1)])),(0,i.Lk)("button",{onClick:a[1]||(a[1]=(...e)=>n.zoomOut&&n.zoomOut(...e)),class:"zoom-button"},a[3]||(a[3]=[(0,i.Lk)("i",{class:"fas fa-search-minus"},null,-1)]))]),(0,i.Lk)("div",lr,null,512)])}const dr={name:"LimeChart",props:{data:Object},mounted(){this.initChart(),window.addEventListener("resize",this.resizeChart)},beforeDestroy(){window.removeEventListener("resize",this.resizeChart),this.destroyChart()},methods:{initChart(){if(!this.data||!this.$refs.chart)return;const e=Object.entries(this.data).sort((([,e],[,a])=>a-e)),a=e.map((([e])=>e)),t=e.map((([,e])=>e));this.chart=Hi.Ts(this.$refs.chart);const s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",name:"×”×©×¤×¢×” ×ž×ž×•×¦×¢×ª (LIME)",nameLocation:"middle",nameGap:25},yAxis:{type:"category",data:a,name:"×ž×©×ª× ×™×",inverse:!0},series:[{type:"bar",data:t,label:{show:!0,position:"right",formatter:"{c}"},itemStyle:{color:"#3498db"}}],dataZoom:[{type:"slider",yAxisIndex:0,start:0,end:20,filterMode:"filter"},{type:"inside",yAxisIndex:0,start:0,end:20}]};this.chart.setOption(s)},zoomIn(){const e=this.chart.getOption().dataZoom[0];let{start:a,end:t}=e;const s=a+5,i=t-5;i-s>=10&&this.chart.dispatchAction({type:"dataZoom",start:s,end:i})},zoomOut(){const e=this.chart.getOption().dataZoom[0];let{start:a,end:t}=e;const s=a-5,i=t+5;s>=0&&i<=100&&this.chart.dispatchAction({type:"dataZoom",start:s,end:i})},resizeChart(){this.chart&&this.chart.resize()},destroyChart(){this.chart&&(this.chart.dispose(),this.chart=null)}}},cr=(0,m.A)(dr,[["render",or]]),mr=cr,ur={ref:"chart",class:"chart"};function pr(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",ur,null,512)}const hr={name:"PieChart",props:{data:Object},mounted(){this.initChart(),window.addEventListener("resize",this.resizeChart)},beforeDestroy(){window.removeEventListener("resize",this.resizeChart),this.destroyChart()},methods:{initChart(){if(!this.data||!this.$refs.chart)return;const e=Object.keys(this.data.SHAP),a=e.map((e=>({name:e,value:this.data.SHAP[e]}))),t=a.sort(((e,a)=>a.value-e.value)).slice(0,15);this.chart=Hi.Ts(this.$refs.chart);const s={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"right",data:t.map((e=>e.name))},series:[{name:"SHAP Values",type:"pie",radius:["30%","60%"],roseType:"radius",data:t,label:{show:!0,formatter:"{b}: {d}%"},labelLine:{length:15,length2:10},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#3498db","#e74c3c","#2ecc71","#9b59b6","#f39c12","#1abc9c","#34495e","#d35400","#7f8c8d","#8e44ad","#27ae60","#c0392b","#2980b9","#e67e22","#bdc3c7"]};this.chart.setOption(s)},resizeChart(){this.chart&&this.chart.resize()},destroyChart(){this.chart&&(this.chart.dispose(),this.chart=null)}}},_r=(0,m.A)(hr,[["render",pr]]),gr=_r,vr={class:"radar-chart-container"},br={class:"feature-controls"},fr={ref:"chart",class:"chart"};function kr(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",vr,[(0,i.Lk)("div",br,[a[3]||(a[3]=(0,i.Lk)("label",{for:"feature-count"},"Number of Features to Display:",-1)),(0,i.bo)((0,i.Lk)("select",{id:"feature-count","onUpdate:modelValue":a[0]||(a[0]=e=>n.selectedFeatures=e),onChange:a[1]||(a[1]=(...e)=>l.updateChart&&l.updateChart(...e))},a[2]||(a[2]=[(0,i.Lk)("option",{value:15},"15",-1),(0,i.Lk)("option",{value:30},"30",-1),(0,i.Lk)("option",{value:50},"50",-1)]),544),[[s.u1,n.selectedFeatures]])]),(0,i.Lk)("div",fr,null,512)])}const yr={name:"RadarChart",props:{data:Object},data(){return{chart:null,selectedFeatures:30}},mounted(){this.initChart(),window.addEventListener("resize",this.resizeChart)},beforeDestroy(){window.removeEventListener("resize",this.resizeChart),this.destroyChart()},methods:{initChart(){this.data&&this.$refs.chart&&this.createRadarChart(this.selectedFeatures)},createRadarChart(e){const a=Object.entries(this.data.SHAP).sort((([,e],[,a])=>a-e)).slice(0,e),t=a.map((([e])=>e)),s=t.map((e=>({name:e,max:1}))),i=[{name:"SHAP",value:Object.values(this.data.SHAP).slice(0,e)},{name:"FBT",value:Object.values(this.data.FBT).slice(0,e)},{name:"Logistic Regression",value:Object.values(this.data["Logistic Regression"]).slice(0,e)},{name:"Decision Tree",value:Object.values(this.data["Decision Tree"]).slice(0,e)},{name:"Lime",value:Object.values(this.data.Lime).slice(0,e)}];this.chart=Hi.Ts(this.$refs.chart);const r={tooltip:{trigger:"item"},legend:{top:"5%",left:"center",data:["SHAP","FBT","Logistic Regression","Decision Tree","Lime"],textStyle:{fontSize:14,color:"#333"}},radar:{indicator:s,shape:"polygon",radius:"65%",splitNumber:5,splitArea:{areaStyle:{color:["#f7f9fc","#eaf2f8"]}},splitLine:{lineStyle:{color:"#dce1e6"}},axisLine:{lineStyle:{color:"#b8c3cc"}}},series:[{name:"Models Comparison",type:"radar",data:i.map((e=>({value:e.value,name:e.name}))),areaStyle:{opacity:.2},lineStyle:{width:2},symbol:"circle",symbolSize:6}],color:["#3498db","#e74c3c","#2ecc71","#9b59b6","#f1c40f"]};this.chart.setOption(r)},updateChart(){this.destroyChart(),this.createRadarChart(this.selectedFeatures)},resizeChart(){this.chart&&this.chart.resize()},destroyChart(){this.chart&&(this.chart.dispose(),this.chart=null)}}},Lr=(0,m.A)(yr,[["render",kr]]),wr=Lr,Cr={name:"GraphContainer",props:{type:String,data:Object},components:{BarChart:Ki,LineChart:ir,LimeChart:mr,PieChart:gr,RadarChart:wr}},xr=(0,m.A)(Cr,[["render",$i],["__scopeId","data-v-62036fde"]]),Ir=xr,Pr={class:"graph-buttons-container"},Mr={class:"graph-buttons"},Er=["onClick"];function Ur(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",Pr,[(0,i.Lk)("div",Mr,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.graphTypes,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,class:(0,k.C4)(["graph-button",{active:t.activeType===e}]),onClick:a=>n.switchGraphType(e)},(0,k.v_)(e),11,Er)))),128))])])}const Ar={name:"GraphControls",props:{activeType:{type:String,required:!0},graphTypes:{type:Array,required:!0}},emits:["updateType"],methods:{switchGraphType(e){this.$emit("updateType",e)}}},Sr=(0,m.A)(Ar,[["render",Ur],["__scopeId","data-v-7e227540"]]),Dr=Sr,Xr=JSON.parse('{"SHAP":{"age":6.348861217498779,"ventilated_apache":5.640600681304932,"apache_3j_diagnosis":4.512126922607422,"gcs_motor_apache":3.1626291275024414,"d1_spo2_min":2.9112906455993652,"d1_heartrate_max":2.5494613647460938,"d1_bun_max":2.4383742809295654,"d1_heartrate_min":2.176100254058838,"d1_resprate_max":2.152320384979248,"d1_sysbp_min":2.0763120651245117,"icu_id":2.019176721572876,"gcs_verbal_apache":2.0082664489746094,"d1_bun_min":2.0017645359039307,"pre_icu_los_days":1.8945014476776123,"urineoutput_apache":1.8184455633163452,"d1_lactate_min":1.7518550157546997,"apache_3j_bodysystem":1.5694539546966553,"bmi":1.5305156707763672,"d1_temp_min":1.5269678831100464,"d1_resprate_min":1.459975242614746,"gcs_eyes_apache":1.4158306121826172,"d1_temp_max":1.3149561882019043,"d1_wbc_min":1.2948633432388306,"d1_platelets_min":1.2063567638397217,"elective_surgery":1.0783162117004395,"d1_hemaglobin_min":1.056981086730957,"d1_mbp_min":0.9195119142532349,"d1_sodium_max":0.8965379595756531,"apache_2_diagnosis":0.8642318844795227,"d1_albumin_min":0.854255735874176,"d1_hemaglobin_max":0.8441399931907654,"h1_heartrate_min":0.8188666701316833,"h1_heartrate_max":0.8110155463218689,"d1_arterial_ph_min":0.8007981777191162,"d1_arterial_pco2_min":0.7890728116035461,"h1_resprate_min":0.774185299873352,"d1_pao2fio2ratio_min":0.7256168127059937,"d1_glucose_min":0.6769713163375854,"heart_rate_apache":0.6748784184455872,"h1_temp_min":0.6571687459945679,"apache_2_bodysystem":0.6524469256401062,"hospital_admit_source":0.6267331838607788,"d1_pao2fio2ratio_max":0.5863984823226929,"hospital_id":0.5852670669555664,"d1_sysbp_max":0.5753697752952576,"d1_inr_max":0.569242537021637,"resprate_apache":0.5634469389915466,"d1_wbc_max":0.5548503398895264,"icu_type":0.5467140674591064,"d1_sysbp_noninvasive_max":0.5311461687088013,"d1_creatinine_min":0.5183789730072021,"d1_creatinine_max":0.5061812400817871,"solid_tumor_with_metastasis":0.5050977468490601,"creatinine_apache":0.4972062408924103,"d1_lactate_max":0.4966122508049011,"d1_calcium_max":0.4894924759864807,"temp_apache":0.48362067341804504,"d1_sysbp_noninvasive_min":0.46336451172828674,"icu_admit_source":0.45601436495780945,"d1_potassium_min":0.4475580155849457,"d1_hco3_max":0.43629786372184753,"weight":0.43603745102882385,"d1_bilirubin_max":0.4351896345615387,"wbc_apache":0.4183877110481262,"map_apache":0.41286078095436096,"d1_sysbp_invasive_max":0.4039539396762848,"d1_arterial_pco2_max":0.3941020965576172,"d1_arterial_po2_min":0.3939162492752075,"d1_arterial_ph_max":0.3783899247646332,"d1_inr_min":0.36840465664863586,"height":0.36291781067848206,"glucose_apache":0.36096319556236267,"h1_mbp_noninvasive_min":0.3597259521484375,"d1_glucose_max":0.3578983545303345,"d1_bilirubin_min":0.3438881039619446,"d1_mbp_noninvasive_min":0.33750009536743164,"d1_mbp_invasive_min":0.3317127823829651,"albumin_apache":0.32625651359558105,"h1_temp_max":0.32337313890457153,"d1_albumin_max":0.31918835639953613,"d1_sodium_min":0.3051452934741974,"d1_calcium_min":0.29998478293418884,"h1_sysbp_noninvasive_max":0.29176828265190125,"d1_diasbp_min":0.2911343574523926,"fio2_apache":0.2905997037887573,"d1_sysbp_invasive_min":0.29037147760391235,"d1_platelets_max":0.2892218232154846,"d1_potassium_max":0.28774428367614746,"d1_spo2_max":0.2646830976009369,"d1_hco3_min":0.25658315420150757,"d1_diasbp_noninvasive_min":0.24639342725276947,"diabetes_mellitus":0.24629533290863037,"h1_mbp_min":0.24309836328029633,"h1_glucose_max":0.23895186185836792,"ethnicity":0.23695386946201324,"bun_apache":0.22922062873840332,"d1_diasbp_invasive_min":0.22702282667160034,"h1_glucose_min":0.22659409046173096,"h1_spo2_max":0.2259262651205063,"d1_arterial_po2_max":0.22209246456623077,"d1_hematocrit_min":0.21862564980983734,"h1_spo2_min":0.21728816628456116,"gcs_unable_apache":0.21272997558116913,"gender":0.20783548057079315,"h1_sysbp_min":0.2018153965473175,"hematocrit_apache":0.19727253913879395,"h1_diasbp_max":0.18518440425395966,"d1_hematocrit_max":0.18329988420009613,"bilirubin_apache":0.1705893576145172,"h1_sysbp_noninvasive_min":0.16338425874710083,"h1_diasbp_min":0.15520307421684265,"h1_resprate_max":0.15389461815357208,"h1_mbp_noninvasive_max":0.15341651439666748,"h1_sysbp_max":0.1486647129058838,"h1_diasbp_noninvasive_min":0.14741726219654083,"d1_diasbp_max":0.14684084057807922,"paco2_apache":0.14471468329429626,"h1_mbp_max":0.14287300407886505,"immunosuppression":0.14244364202022552,"d1_diasbp_invasive_max":0.1405300498008728,"arf_apache":0.1392935961484909,"h1_inr_min":0.13526645302772522,"sodium_apache":0.13320723176002502,"h1_inr_max":0.1299128234386444,"h1_diasbp_noninvasive_max":0.12660646438598633,"h1_arterial_po2_min":0.1219525933265686,"h1_mbp_invasive_min":0.12029154598712921,"d1_mbp_max":0.10949687659740448,"ph_apache":0.09684405475854874,"h1_hco3_max":0.0967707708477974,"d1_mbp_noninvasive_max":0.09599994122982025,"d1_diasbp_noninvasive_max":0.08736670762300491,"pao2_apache":0.08436044305562973,"h1_calcium_max":0.08340246975421906,"h1_arterial_ph_max":0.08194315433502197,"h1_diasbp_invasive_min":0.08060064166784286,"h1_sysbp_invasive_max":0.07742771506309509,"apache_post_operative":0.06944194436073303,"h1_pao2fio2ratio_min":0.06807934492826462,"d1_mbp_invasive_max":0.06535644829273224,"h1_arterial_po2_max":0.06089949235320091,"h1_wbc_max":0.05883553624153137,"h1_hematocrit_min":0.057064298540353775,"h1_sysbp_invasive_min":0.05002747103571892,"h1_hco3_min":0.04971231147646904,"paco2_for_ph_apache":0.04823468625545502,"h1_potassium_min":0.04806485027074814,"h1_hemaglobin_min":0.04777064919471741,"h1_mbp_invasive_max":0.04735562950372696,"h1_hemaglobin_max":0.04497252404689789,"h1_potassium_max":0.04023786261677742,"h1_calcium_min":0.037223879247903824,"h1_diasbp_invasive_max":0.03651748597621918,"intubated_apache":0.0328422412276268,"h1_albumin_max":0.032815929502248764,"hepatic_failure":0.03281272202730179,"h1_bun_max":0.031781282275915146,"h1_platelets_min":0.030552610754966736,"h1_arterial_ph_min":0.03046577051281929,"h1_lactate_max":0.028540603816509247,"h1_wbc_min":0.027971098199486732,"h1_creatinine_max":0.02790401689708233,"h1_pao2fio2ratio_max":0.027675550431013107,"h1_sodium_min":0.024419547989964485,"h1_hematocrit_max":0.02272345870733261,"h1_arterial_pco2_max":0.021750006824731827,"h1_platelets_max":0.020344367250800133,"icu_stay_type":0.01975199393928051,"h1_sodium_max":0.019031792879104614,"renal_function_triad_flag":0.018270082771778107,"h1_bun_min":0.016944240778684616,"h1_lactate_min":0.01658320613205433,"h1_arterial_pco2_min":0.01470022089779377,"h1_creatinine_min":0.013474683277308941,"h1_albumin_min":0.012287776917219162,"h1_bilirubin_max":0.010628745891153812,"h1_bilirubin_min":0.00873485952615738,"cirrhosis":0.0014656877610832453,"leukemia":0.0010072655277326703,"lymphoma":0.00039912419742904603,"aids":0.00007260040001710877,"mods_pentad_flag":0.0000414515016018413,"readmission_status":0},"FBT":{"age":6.7,"ventilated_apache":5.5,"apache_3j_diagnosis":4.8,"gcs_motor_apache":3.3,"d1_spo2_min":2.7,"d1_heartrate_max":2.9,"d1_bun_max":2.4,"d1_heartrate_min":2.5,"d1_resprate_max":2,"d1_sysbp_min":2.3,"icu_id":2.1,"gcs_verbal_apache":2.2,"d1_bun_min":2.1,"pre_icu_los_days":1.7,"urineoutput_apache":1.9,"d1_lactate_min":1.6,"apache_3j_bodysystem":1.7,"bmi":1.4,"d1_temp_min":1.8,"d1_resprate_min":1.3,"gcs_eyes_apache":1.5,"d1_temp_max":1.4,"d1_wbc_min":1.2,"d1_platelets_min":1.5,"elective_surgery":1,"d1_hemaglobin_min":1.3,"d1_mbp_min":1,"d1_sodium_max":1.1,"apache_2_diagnosis":0.88,"d1_albumin_min":0.93,"d1_hemaglobin_max":0.81,"h1_heartrate_min":0.85,"h1_heartrate_max":0.79,"d1_arterial_ph_min":0.75,"d1_arterial_pco2_min":0.83,"h1_resprate_min":0.72,"d1_pao2fio2ratio_min":0.68,"d1_glucose_min":0.74,"heart_rate_apache":0.71,"h1_temp_min":0.63,"apache_2_bodysystem":0.7,"hospital_admit_source":0.6,"d1_pao2fio2ratio_max":0.62,"hospital_id":0.54,"d1_sysbp_max":0.65,"d1_inr_max":0.52,"resprate_apache":0.6,"d1_wbc_max":0.58,"icu_type":0.49,"d1_sysbp_noninvasive_max":0.57,"d1_creatinine_min":0.55,"d1_creatinine_max":0.48,"solid_tumor_with_metastasis":0.46,"creatinine_apache":0.53,"d1_lactate_max":0.44,"d1_calcium_max":0.52,"temp_apache":0.5,"d1_sysbp_noninvasive_min":0.41,"icu_admit_source":0.5,"d1_potassium_min":0.43,"d1_hco3_max":0.39,"weight":0.48,"d1_bilirubin_max":0.41,"wbc_apache":0.38,"map_apache":0.45,"d1_sysbp_invasive_max":0.35,"d1_arterial_pco2_max":0.37,"d1_arterial_po2_min":0.41,"d1_arterial_ph_max":0.42,"d1_inr_min":0.39,"height":0.33,"glucose_apache":0.42,"h1_mbp_noninvasive_min":0.37,"d1_glucose_max":0.31,"d1_bilirubin_min":0.29,"d1_mbp_noninvasive_min":0.36,"d1_mbp_invasive_min":0.31,"albumin_apache":0.29,"h1_temp_max":0.28,"d1_albumin_max":0.35,"d1_sodium_min":0.28,"d1_calcium_min":0.34,"h1_sysbp_noninvasive_max":0.26,"d1_diasbp_min":0.32,"fio2_apache":0.27,"d1_sysbp_invasive_min":0.3,"d1_platelets_max":0.25,"d1_potassium_max":0.29,"d1_spo2_max":0.23,"d1_hco3_min":0.24,"d1_diasbp_noninvasive_min":0.21,"diabetes_mellitus":0.2,"h1_mbp_min":0.22,"h1_glucose_max":0.2,"ethnicity":0.18,"bun_apache":0.25,"d1_diasbp_invasive_min":0.24,"h1_glucose_min":0.22,"h1_spo2_max":0.25,"d1_arterial_po2_max":0.26,"d1_hematocrit_min":0.23,"h1_spo2_min":0.21,"gcs_unable_apache":0.2,"gender":0.19,"h1_sysbp_min":0.15,"hematocrit_apache":0.21,"h1_diasbp_max":0.17,"d1_hematocrit_max":0.22,"bilirubin_apache":0.2,"h1_sysbp_noninvasive_min":0.14,"h1_diasbp_min":0.18,"h1_resprate_max":0.12,"h1_mbp_noninvasive_max":0.11,"h1_sysbp_max":0.2,"h1_diasbp_noninvasive_min":0.13,"d1_diasbp_max":0.1,"paco2_apache":0.2,"h1_mbp_max":0.17,"immunosuppression":0.14,"d1_diasbp_invasive_max":0.12,"arf_apache":0.16,"h1_inr_min":0.1,"sodium_apache":0.09,"h1_inr_max":0.1,"h1_diasbp_noninvasive_max":0.08,"h1_arterial_po2_min":0.06,"h1_mbp_invasive_min":0.05,"d1_mbp_max":0.08,"ph_apache":0.07,"h1_hco3_max":0.05,"d1_mbp_noninvasive_max":0.03,"d1_diasbp_noninvasive_max":0.04,"pao2_apache":0.03,"h1_calcium_max":0.02,"h1_arterial_ph_max":0.03,"h1_diasbp_invasive_min":0.02,"h1_sysbp_invasive_max":0.01,"apache_post_operative":0.05,"h1_pao2fio2ratio_min":0.04,"d1_mbp_invasive_max":0.03,"h1_arterial_po2_max":0.02,"h1_wbc_max":0.01,"h1_hematocrit_min":0.03,"h1_sysbp_invasive_min":0.02,"h1_hco3_min":0.03,"paco2_for_ph_apache":0.04,"h1_potassium_min":0.03,"h1_hemaglobin_min":0.04,"h1_mbp_invasive_max":0.02,"h1_hemaglobin_max":0.01,"h1_potassium_max":0.03,"h1_calcium_min":0.04,"h1_diasbp_invasive_max":0.03,"intubated_apache":0.01,"h1_albumin_max":0.02,"hepatic_failure":0.03,"h1_bun_max":0.01,"h1_platelets_min":0.02,"h1_arterial_ph_min":0.01,"h1_lactate_max":0.02,"h1_wbc_min":0.01,"h1_creatinine_max":0.02,"h1_pao2fio2ratio_max":0.01,"h1_sodium_min":0.03,"h1_hematocrit_max":0.02,"h1_arterial_pco2_max":0.03,"h1_platelets_max":0.02,"icu_stay_type":0.01,"h1_sodium_max":0.02,"renal_function_triad_flag":0.02,"h1_bun_min":0.02,"h1_lactate_min":0.02,"h1_arterial_pco2_min":0.03,"h1_creatinine_min":0.01,"h1_albumin_min":0.01,"h1_bilirubin_max":0.01,"h1_bilirubin_min":0.01,"cirrhosis":0.001,"leukemia":0.001,"lymphoma":0.0005,"aids":0.0001,"mods_pentad_flag":0.0001,"readmission_status":0},"Logistic Regression":{"age":2.835789511088188,"ventilated_apache":1.9043925535359254,"apache_3j_diagnosis":2.093832401220073,"gcs_motor_apache":1.59143177001677,"d1_spo2_min":1.1839050296374138,"d1_heartrate_max":1.8742979867947016,"d1_bun_max":0.3118865649468058,"d1_heartrate_min":0.06254216103034368,"d1_resprate_max":0.017046517291798482,"d1_sysbp_min":0.21178508822683575,"icu_id":0.23953692403287097,"gcs_verbal_apache":0.5340820676431329,"d1_bun_min":2.169355852547718,"pre_icu_los_days":0.8242733744564336,"urineoutput_apache":0.4511185174499246,"d1_lactate_min":1.462708004168901,"apache_3j_bodysystem":1.1815614239967245,"bmi":0.07630097772344122,"d1_temp_min":0.9487848256098923,"d1_resprate_min":0.3636564663387712,"gcs_eyes_apache":0.8718851759147526,"d1_temp_max":0.09792589020526975,"d1_wbc_min":1.2363065876434056,"d1_platelets_min":1.6453715461171199,"elective_surgery":2.0740523805021547,"d1_hemaglobin_min":1.5235063521243712,"d1_mbp_min":1.5745583604828046,"d1_sodium_max":0.498076541489037,"apache_2_diagnosis":0.26336288212223324,"d1_albumin_min":0.7959535185122905,"d1_hemaglobin_max":0.8537955672122326,"h1_heartrate_min":0.12541834862289766,"h1_heartrate_max":0.7145918674049161,"d1_arterial_ph_min":0.3929533748804991,"d1_arterial_pco2_min":0.14612168032879505,"h1_resprate_min":0.5404168750974835,"d1_pao2fio2ratio_min":0.13453006509901957,"d1_glucose_min":0.5818501707231041,"heart_rate_apache":0.08105506952726178,"h1_temp_min":0.13204652521689492,"apache_2_bodysystem":0.33948916567675314,"hospital_admit_source":0.3856940510309421,"d1_pao2fio2ratio_max":0.22741651611739772,"hospital_id":0.19747953674184834,"d1_sysbp_max":1.0098336762008284,"d1_inr_max":0.08117025481364097,"resprate_apache":0.5638513291561202,"d1_wbc_max":0.2730601308961813,"icu_type":0.3479683488634174,"d1_sysbp_noninvasive_max":1.5377073373060088,"d1_creatinine_min":0.18471940847092624,"d1_creatinine_max":1.3767531217391737,"solid_tumor_with_metastasis":0.656672247300004,"creatinine_apache":0.865907443355843,"d1_lactate_max":0.45243767248057615,"d1_calcium_max":0.07542042523003056,"temp_apache":0.02850141855766428,"d1_sysbp_noninvasive_min":0.2441708867762524,"icu_admit_source":0.8973450198552888,"d1_potassium_min":0.3225254722586213,"d1_hco3_max":0.5507588847856639,"weight":0.7002530986325424,"d1_bilirubin_max":0.1663259602923802,"wbc_apache":0.3176847897904099,"map_apache":0.2701992537746811,"d1_sysbp_invasive_max":0.03681703725704044,"d1_arterial_pco2_max":0.7058158801095045,"d1_arterial_po2_min":0.2764237118301177,"d1_arterial_ph_max":0.22568685874563305,"d1_inr_min":0.12132078440766653,"height":0.1258912603161162,"glucose_apache":0.07914917032873665,"h1_mbp_noninvasive_min":2.656444775273006,"d1_glucose_max":0.0004049276952883826,"d1_bilirubin_min":0.5411418269779443,"d1_mbp_noninvasive_min":1.0544766886004597,"d1_mbp_invasive_min":0.23198751111822108,"albumin_apache":0.34006403112544414,"h1_temp_max":0.38846312729016164,"d1_albumin_max":0.38618993589087697,"d1_sodium_min":0.9708503252621606,"d1_calcium_min":0.2868526614658546,"h1_sysbp_noninvasive_max":2.106930853371994,"d1_diasbp_min":0.9769621293833436,"fio2_apache":0.6139748890314317,"d1_sysbp_invasive_min":0.05337309375416026,"d1_platelets_max":1.246676386168721,"d1_potassium_max":0.24683739138827218,"d1_spo2_max":0.4785718892030896,"d1_hco3_min":0.013692535728514478,"d1_diasbp_noninvasive_min":0.59946982088345,"diabetes_mellitus":0.38213904390615994,"h1_mbp_min":2.193405435777913,"h1_glucose_max":0.30726780936115283,"ethnicity":0.0161219284148926,"bun_apache":1.109774559611134,"d1_diasbp_invasive_min":0.02687890629772814,"h1_glucose_min":0.17375732549215075,"h1_spo2_max":0.01107683003863389,"d1_arterial_po2_max":0.2998775145148812,"d1_hematocrit_min":1.2121878368190353,"h1_spo2_min":0.3679319527612762,"gcs_unable_apache":0.6253488498167136,"gender":0.22786910353472337,"h1_sysbp_min":0.8690717898852455,"hematocrit_apache":0.42882737260060017,"h1_diasbp_max":0.24182087585852713,"d1_hematocrit_max":0.2050151776139245,"bilirubin_apache":0.06277364404469747,"h1_sysbp_noninvasive_min":0.6912703409016174,"h1_diasbp_min":0.4928527411551839,"h1_resprate_max":0.28497298169957014,"h1_mbp_noninvasive_max":0.6842736795078534,"h1_sysbp_max":1.6147874479447428,"h1_diasbp_noninvasive_min":0.13979738234435904,"d1_diasbp_max":1.8038360500339974,"paco2_apache":0.12724561630547995,"h1_mbp_max":0.26059829197138906,"immunosuppression":0.27478863231045525,"d1_diasbp_invasive_max":0.22452200989268098,"arf_apache":0.4302780691442946,"h1_inr_min":0.12132078440766772,"sodium_apache":0.11363296510837119,"h1_inr_max":0.08117025481364097,"h1_diasbp_noninvasive_max":0.15213353825354597,"h1_arterial_po2_min":0.9187789105591473,"h1_mbp_invasive_min":0.22187033250871,"d1_mbp_max":0.3826942398534748,"ph_apache":0.06947866818984036,"h1_hco3_max":0.06497372723245837,"d1_mbp_noninvasive_max":0.5174105688543652,"d1_diasbp_noninvasive_max":1.5783643079463596,"pao2_apache":0.400746476386178,"h1_calcium_max":0.8212334377935661,"h1_arterial_ph_max":0.3856016317367824,"h1_diasbp_invasive_min":0.2966070798312936,"h1_sysbp_invasive_max":0.09624192655978694,"apache_post_operative":1.250470937157326,"h1_pao2fio2ratio_min":0.3628595590124903,"d1_mbp_invasive_max":0.11975920404957086,"h1_arterial_po2_max":1.3450980373371795,"h1_wbc_max":1.2735996988156026,"h1_hematocrit_min":0.08432824279010559,"h1_sysbp_invasive_min":0.08885008195738121,"h1_hco3_min":0.11086125090101269,"paco2_for_ph_apache":0.12724561630547995,"h1_potassium_min":0.47374038063258084,"h1_hemaglobin_min":0.24133765987545483,"h1_mbp_invasive_max":0.11915684263262263,"h1_hemaglobin_max":0.3565391950133722,"h1_potassium_max":0.44538406213302406,"h1_calcium_min":0.7115894789690925,"h1_diasbp_invasive_max":0.3638658002324799,"intubated_apache":0.12284047936551616,"h1_albumin_max":0.04918938798599553,"hepatic_failure":0.15161430414150037,"h1_bun_max":0.024392642274486183,"h1_platelets_min":0.9167913059751001,"h1_arterial_ph_min":0.12037766906252304,"h1_lactate_max":0.5968690790016177,"h1_wbc_min":1.1056865499893371,"h1_creatinine_max":0.22856894857812068,"h1_pao2fio2ratio_max":0.5853039655702517,"h1_sodium_min":0.562943175176098,"h1_hematocrit_max":0.38971014320281894,"h1_arterial_pco2_max":0.10340646852008181,"h1_platelets_max":0.9044494382928736,"icu_stay_type":0.15618752726650326,"h1_sodium_max":0.7095004779062847,"renal_function_triad_flag":0.24771181382946067,"h1_bun_min":0.07374316392550528,"h1_lactate_min":0.9076257193917062,"h1_arterial_pco2_min":0.19649379942775497,"h1_creatinine_min":0.13936983033215883,"h1_albumin_min":0.06256356051294798,"h1_bilirubin_max":0.08111651258135436,"h1_bilirubin_min":0.08581042686945804,"cirrhosis":0.1619615845457772,"leukemia":0.07332827991045537,"lymphoma":0.1419167150837718,"aids":0.09301096792709997,"mods_pentad_flag":0.06032021624884652,"readmission_status":0},"Decision Tree":{"age":0.55737697049172,"ventilated_apache":32.96151036258663,"apache_3j_diagnosis":10.414566452524541,"gcs_motor_apache":5.876451314098001,"d1_spo2_min":0,"d1_heartrate_max":0,"d1_bun_max":0,"d1_heartrate_min":1.8699609620999809,"d1_resprate_max":1.599610932714053,"d1_sysbp_min":5.359127181414787,"icu_id":0.22875582024770358,"gcs_verbal_apache":0,"d1_bun_min":8.608154832846322,"pre_icu_los_days":0,"urineoutput_apache":0,"d1_lactate_min":18.0461168732411,"apache_3j_bodysystem":0,"bmi":0,"d1_temp_min":2.133427963031425,"d1_resprate_min":0,"gcs_eyes_apache":0.7974851889089446,"d1_temp_max":0,"d1_wbc_min":0,"d1_platelets_min":0,"elective_surgery":0,"d1_hemaglobin_min":0,"d1_mbp_min":0,"d1_sodium_max":0,"apache_2_diagnosis":0.6289498448421728,"d1_albumin_min":0,"d1_hemaglobin_max":0,"h1_heartrate_min":0,"h1_heartrate_max":0,"d1_arterial_ph_min":0,"d1_arterial_pco2_min":0,"h1_resprate_min":0,"d1_pao2fio2ratio_min":0,"d1_glucose_min":0,"heart_rate_apache":0,"h1_temp_min":0,"apache_2_bodysystem":0,"hospital_admit_source":0,"d1_pao2fio2ratio_max":0.7796038204691682,"hospital_id":0,"d1_sysbp_max":0,"d1_inr_max":0,"resprate_apache":0,"d1_wbc_max":0,"icu_type":0,"d1_sysbp_noninvasive_max":0,"d1_creatinine_min":0,"d1_creatinine_max":0,"solid_tumor_with_metastasis":0,"creatinine_apache":0,"d1_lactate_max":3.868933280915967,"d1_calcium_max":0,"temp_apache":0,"d1_sysbp_noninvasive_min":3.1302171764261435,"icu_admit_source":0,"d1_potassium_min":0,"d1_hco3_max":0.23043637945465273,"weight":0,"d1_bilirubin_max":0,"wbc_apache":0,"map_apache":0,"d1_sysbp_invasive_max":0,"d1_arterial_pco2_max":0,"d1_arterial_po2_min":0,"d1_arterial_ph_max":0.3641525032350583,"d1_inr_min":0,"height":0,"glucose_apache":0,"h1_mbp_noninvasive_min":0,"d1_glucose_max":0.15880477322462846,"d1_bilirubin_min":0,"d1_mbp_noninvasive_min":0.8239022524627011,"d1_mbp_invasive_min":0,"albumin_apache":0,"h1_temp_max":0,"d1_albumin_max":0,"d1_sodium_min":0,"d1_calcium_min":0,"h1_sysbp_noninvasive_max":0,"d1_diasbp_min":0,"fio2_apache":0,"d1_sysbp_invasive_min":0,"d1_platelets_max":0,"d1_potassium_max":0,"d1_spo2_max":0,"d1_hco3_min":0,"d1_diasbp_noninvasive_min":0,"diabetes_mellitus":0,"h1_mbp_min":0,"h1_glucose_max":0,"ethnicity":0,"bun_apache":1.5624551147642864,"d1_diasbp_invasive_min":0,"h1_glucose_min":0,"h1_spo2_max":0,"d1_arterial_po2_max":0,"d1_hematocrit_min":0,"h1_spo2_min":0,"gcs_unable_apache":0,"gender":0,"h1_sysbp_min":0,"hematocrit_apache":0,"h1_diasbp_max":0,"d1_hematocrit_max":0,"bilirubin_apache":0,"h1_sysbp_noninvasive_min":0,"h1_diasbp_min":0,"h1_resprate_max":0,"h1_mbp_noninvasive_max":0,"h1_sysbp_max":0,"h1_diasbp_noninvasive_min":0,"d1_diasbp_max":0,"paco2_apache":0,"h1_mbp_max":0,"immunosuppression":0,"d1_diasbp_invasive_max":0,"arf_apache":0,"h1_inr_min":0,"sodium_apache":0,"h1_inr_max":0,"h1_diasbp_noninvasive_max":0,"h1_arterial_po2_min":0,"h1_mbp_invasive_min":0,"d1_mbp_max":0,"ph_apache":0,"h1_hco3_max":0,"d1_mbp_noninvasive_max":0,"d1_diasbp_noninvasive_max":0,"pao2_apache":0,"h1_calcium_max":0,"h1_arterial_ph_max":0,"h1_diasbp_invasive_min":0,"h1_sysbp_invasive_max":0,"apache_post_operative":0,"h1_pao2fio2ratio_min":0,"d1_mbp_invasive_max":0,"h1_arterial_po2_max":0,"h1_wbc_max":0,"h1_hematocrit_min":0,"h1_sysbp_invasive_min":0,"h1_hco3_min":0,"paco2_for_ph_apache":0,"h1_potassium_min":0,"h1_hemaglobin_min":0,"h1_mbp_invasive_max":0,"h1_hemaglobin_max":0,"h1_potassium_max":0,"h1_calcium_min":0,"h1_diasbp_invasive_max":0,"intubated_apache":0,"h1_albumin_max":0,"hepatic_failure":0,"h1_bun_max":0,"h1_platelets_min":0,"h1_arterial_ph_min":0,"h1_lactate_max":0,"h1_wbc_min":0,"h1_creatinine_max":0,"h1_pao2fio2ratio_max":0,"h1_sodium_min":0,"h1_hematocrit_max":0,"h1_arterial_pco2_max":0,"h1_platelets_max":0,"icu_stay_type":0,"h1_sodium_max":0,"renal_function_triad_flag":0,"h1_bun_min":0,"h1_lactate_min":0,"h1_arterial_pco2_min":0,"h1_creatinine_min":0,"h1_albumin_min":0,"h1_bilirubin_max":0,"h1_bilirubin_min":0,"cirrhosis":0,"leukemia":0,"lymphoma":0,"aids":0,"mods_pentad_flag":0,"readmission_status":0},"Lime":{"age":3.8670598149386533,"ventilated_apache":4.242752498405968,"apache_3j_diagnosis":2.351216383435119,"gcs_motor_apache":0,"d1_spo2_min":1.9233135655257971,"d1_heartrate_max":1.3057179324474337,"d1_bun_max":1.5198066661618008,"d1_heartrate_min":1.0029362787328813,"d1_resprate_max":0.9778444280376464,"d1_sysbp_min":0.892125828764352,"icu_id":0.8598557255943045,"gcs_verbal_apache":0.41647054555844176,"d1_bun_min":1.057302693459932,"pre_icu_los_days":2.3200469583502272,"urineoutput_apache":3.014675959423957,"d1_lactate_min":3.845200393695686,"apache_3j_bodysystem":0.8878481583681822,"bmi":0.9890129213104307,"d1_temp_min":1.2735965743766504,"d1_resprate_min":0.5560651644543243,"gcs_eyes_apache":1.5735403423476755,"d1_temp_max":0.8274883311743164,"d1_wbc_min":1.1276230157071974,"d1_platelets_min":0.4408502182768454,"elective_surgery":1.6707372819086863,"d1_hemaglobin_min":0.7567523311328881,"d1_mbp_min":0.7886396740649209,"d1_sodium_max":0.46531051975527105,"apache_2_diagnosis":0.24158167905179154,"d1_albumin_min":0.5861957585452316,"d1_hemaglobin_max":0.569149567206228,"h1_heartrate_min":0.4696364983847086,"h1_heartrate_max":0.4945650348918618,"d1_arterial_ph_min":0.30787235201488383,"d1_arterial_pco2_min":0.4086205084937569,"h1_resprate_min":0.38553553988396355,"d1_pao2fio2ratio_min":0.5221597119841423,"d1_glucose_min":0.522611439956246,"heart_rate_apache":0.33794611631411864,"h1_temp_min":0.3473074946673297,"apache_2_bodysystem":0.2748914055729414,"hospital_admit_source":0.7542204829675883,"d1_pao2fio2ratio_max":0.5470596299418451,"hospital_id":0.21136003541931536,"d1_sysbp_max":0.2476395917751411,"d1_inr_max":0.9896835596210496,"resprate_apache":0.323665226378265,"d1_wbc_max":0.4427994769328291,"icu_type":0.30789611996140415,"d1_sysbp_noninvasive_max":0.26685420021035333,"d1_creatinine_min":0.21010830979850928,"d1_creatinine_max":0.375188873153152,"solid_tumor_with_metastasis":1.1439750956110462,"creatinine_apache":0.4482324660747121,"d1_lactate_max":1.2632110739089757,"d1_calcium_max":0.27660442000015384,"temp_apache":0.39889325612323623,"d1_sysbp_noninvasive_min":0.21127699959245802,"icu_admit_source":0.16885760756311433,"d1_potassium_min":0.25539948026264636,"d1_hco3_max":0.33000973485053864,"weight":0.26523607730752974,"d1_bilirubin_max":1.2051807839653303,"wbc_apache":0.34819862181114514,"map_apache":0.21540167544667022,"d1_sysbp_invasive_max":0.35868614196614185,"d1_arterial_pco2_max":0.36733596159253334,"d1_arterial_po2_min":0.21335381014701468,"d1_arterial_ph_max":0.3432619508634204,"d1_inr_min":0.5444815154760005,"height":0.26141359534393327,"glucose_apache":0.22076385797822032,"h1_mbp_noninvasive_min":0.3340354220054053,"d1_glucose_max":0.2313824237418614,"d1_bilirubin_min":1.2553456959028189,"d1_mbp_noninvasive_min":0.26832639842347267,"d1_mbp_invasive_min":0.22824671508257705,"albumin_apache":0.25737132809412067,"h1_temp_max":0.3467740985992706,"d1_albumin_max":0.37102341032594205,"d1_sodium_min":0.2523951283858437,"d1_calcium_min":0.24138186922666202,"h1_sysbp_noninvasive_max":0.24015182601931276,"d1_diasbp_min":0.29277074489766575,"fio2_apache":0.40565197826535027,"d1_sysbp_invasive_min":0.2349283549019784,"d1_platelets_max":0.21727844725168513,"d1_potassium_max":0.2231904684147907,"d1_spo2_max":0.5826175305785577,"d1_hco3_min":0.29026913544331495,"d1_diasbp_noninvasive_min":0.2148605340397936,"diabetes_mellitus":0.3855321434703222,"h1_mbp_min":0.23491360225457136,"h1_glucose_max":0.19293871464464743,"ethnicity":0.32241588367490426,"bun_apache":0.1819498998512772,"d1_diasbp_invasive_min":0.26393212298612473,"h1_glucose_min":0.24824543077451444,"h1_spo2_max":0.20601726170021256,"d1_arterial_po2_max":0.3732305773451174,"d1_hematocrit_min":0.24482200769632953,"h1_spo2_min":0.4517829567061632,"gcs_unable_apache":1.4747956862047928,"gender":0.2195390681205906,"h1_sysbp_min":0.22485884459840666,"hematocrit_apache":0.19217769216953054,"h1_diasbp_max":0.2102075337495531,"d1_hematocrit_max":0.189664796829873,"bilirubin_apache":0.5527119954271807,"h1_sysbp_noninvasive_min":0.19951098310431614,"h1_diasbp_min":0.17847443540062652,"h1_resprate_max":0.19635931932360265,"h1_mbp_noninvasive_max":0.19771373182855578,"h1_sysbp_max":0.18415665016295527,"h1_diasbp_noninvasive_min":0.19715183995805685,"d1_diasbp_max":0.21826707053465344,"paco2_apache":0.5349826667156794,"h1_mbp_max":0.18679541520798867,"immunosuppression":0.5692859734411548,"d1_diasbp_invasive_max":0.24101383542429874,"arf_apache":0.7983158757973939,"h1_inr_min":0.25649289395620156,"sodium_apache":0.19072395794493657,"h1_inr_max":0.2950130179540939,"h1_diasbp_noninvasive_max":0.19000562308925853,"h1_arterial_po2_min":0.4475766269489875,"h1_mbp_invasive_min":0.4069943934702899,"d1_mbp_max":0.17585456441215674,"ph_apache":0.25086800625505074,"h1_hco3_max":0.3666523358095887,"d1_mbp_noninvasive_max":0.1772457257492888,"d1_diasbp_noninvasive_max":0.18242502442876518,"pao2_apache":0.4390930178807033,"h1_calcium_max":0.42498921896066394,"h1_arterial_ph_max":0.4232375759933781,"h1_diasbp_invasive_min":0.2665671856199465,"h1_sysbp_invasive_max":0.4168906258806378,"apache_post_operative":0.2033713485482431,"h1_pao2fio2ratio_min":0.3838607818532635,"d1_mbp_invasive_max":0.21693322111343322,"h1_arterial_po2_max":0.3556820070127171,"h1_wbc_max":0.36292455667641005,"h1_hematocrit_min":0.24878809724844791,"h1_sysbp_invasive_min":0.28221357230700556,"h1_hco3_min":0.2911814968987176,"paco2_for_ph_apache":0.2858163089374119,"h1_potassium_min":0.26439624297198144,"h1_hemaglobin_min":0.2446453908734575,"h1_mbp_invasive_max":0.25298710721881507,"h1_hemaglobin_max":0.2716982706857725,"h1_potassium_max":0.27674216958609266,"h1_calcium_min":0.2992579449121118,"h1_diasbp_invasive_max":0.24327864372245128,"intubated_apache":0.21284361352276793,"h1_albumin_max":0.47564259513253926,"hepatic_failure":0.6577150959916697,"h1_bun_max":0.27442224680143956,"h1_platelets_min":0.2690909027550287,"h1_arterial_ph_min":0.28051706328088777,"h1_lactate_max":0.39564309422590427,"h1_wbc_min":0.27139231680156106,"h1_creatinine_max":0.2562744339569255,"h1_pao2fio2ratio_max":0.31856604664581273,"h1_sodium_min":0.2484394569812959,"h1_hematocrit_max":0.2607963928166741,"h1_arterial_pco2_max":0.2823710484937437,"h1_platelets_max":0.2620105440494649,"icu_stay_type":0.3151848119279619,"h1_sodium_max":0.25297314692109346,"renal_function_triad_flag":0.5388292165219557,"h1_bun_min":0.2650469106401372,"h1_lactate_min":0.39936115232564845,"h1_arterial_pco2_min":0.29313636348140687,"h1_creatinine_min":0.2561817171846653,"h1_albumin_min":0.4128796069228798,"h1_bilirubin_max":0.40531509292873974,"h1_bilirubin_min":0.3907496656041651,"cirrhosis":0.613213953908258,"leukemia":0.8599321951137727,"lymphoma":1.1055666139538427,"aids":1.9583056410553463,"mods_pentad_flag":1.775313636009231,"readmission_status":0}}'),Fr={name:"GlobalPage",components:{MenuBar:Pi,FeatureMetric:Oi,GraphContainer:Ir,GraphControls:Dr},data(){return{graphTypes:["Bar","Line","Pie","Radar"],activeGraphType:"Bar",graphData:{Bar:Xr,Line:Xr,Pie:Xr,Radar:Xr},isFeatureCollapsed:!1}},created(){d.on("token-expired",this.handleLogout)},beforeUnmount(){d.off("token-expired",this.handleLogout)},computed:{filteredData(){return this.graphData[this.activeGraphType]}},methods:{updateGraphType(e){this.activeGraphType=e},toggleFeatureSection(){this.isFeatureCollapsed=!this.isFeatureCollapsed,(0,i.dY)((()=>{setTimeout((()=>{window.dispatchEvent(new Event("resize"))}),300)}))},handleLogout(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userDetails"),this.$router.push("/")}}},Tr=(0,m.A)(Fr,[["render",ui],["__scopeId","data-v-425ff814"]]),Nr=Tr,Or={class:"local-page"},Rr={class:"main-content"},Vr={key:0,class:"floating-toast left"},Qr={class:"top-row-container"},$r={class:"mortality-card-container"},jr={class:"patient-info-container"},zr={class:"main-data-section"},Br={key:1,class:"centered-message"};function Wr(e,a,t,r,n,l){const o=(0,i.g2)("MenuBar"),d=(0,i.g2)("MortalityRisk"),c=(0,i.g2)("PatientDetails"),m=(0,i.g2)("FilterAndSearch"),u=(0,i.g2)("PredictionExplanations");return(0,i.uX)(),(0,i.CE)("div",Or,[(0,i.bF)(o,{onSearch:l.handlePatientSearch},null,8,["onSearch"]),(0,i.Lk)("div",Rr,[(0,i.bF)(s.eB,{name:"fade-toast"},{default:(0,i.k6)((()=>[n.errorMessage?((0,i.uX)(),(0,i.CE)("div",Vr,[a[4]||(a[4]=(0,i.Lk)("i",{class:"material-icons"},"error_outline",-1)),(0,i.Lk)("span",null,(0,k.v_)(n.errorMessage),1),(0,i.Lk)("button",{class:"close-toast",onClick:a[0]||(a[0]=e=>n.errorMessage="")},a[3]||(a[3]=[(0,i.Lk)("i",{class:"material-icons"},"close",-1)]))])):(0,i.Q3)("",!0)])),_:1}),(0,i.Lk)("div",Qr,[(0,i.Lk)("div",$r,[(0,i.bF)(d,{fetchMortalityRisk:l.fetchMortalityRisk,mortalityPercentage:n.mortalityPercentage,selectedModel:n.selectedModel,"onUpdate:selectedModel":a[1]||(a[1]=e=>n.selectedModel=e)},null,8,["fetchMortalityRisk","mortalityPercentage","selectedModel"])]),(0,i.Lk)("div",jr,[n.isDataVisible?((0,i.uX)(),(0,i.Wv)(c,{key:0,patientData:n.patientDetails,getItemVisualConfig:l.getItemVisualConfig},null,8,["patientData","getItemVisualConfig"])):(0,i.Q3)("",!0),(0,i.bF)(m,{onUpdateFilters:l.applyFiltersToPrediction,viewMode:n.viewMode,"onUpdate:viewMode":a[2]||(a[2]=e=>n.viewMode=e)},null,8,["onUpdateFilters","viewMode"])])]),(0,i.Lk)("div",zr,[n.isDataVisible?((0,i.uX)(),(0,i.Wv)(u,{key:0,ref:"predictionExplanations",selectedModel:n.selectedModel,patientId:n.patientId,viewMode:n.viewMode},null,8,["selectedModel","patientId","viewMode"])):((0,i.uX)(),(0,i.CE)("div",Br,[a[5]||(a[5]=(0,i.Lk)("i",{class:"material-icons",style:{"font-size":"36px",color:"#00796b"}},"search",-1)),(0,i.Lk)("p",null,(0,k.v_)(n.loadingMessage),1)]))])])])}const Gr={key:0,class:"single-risk-box"},Hr={class:"neovital-ring"},qr={viewBox:"0 0 120 120"},Jr={id:"neoGradient",x1:"1",y1:"0",x2:"0",y2:"1"},Kr=["stop-color"],Zr=["stop-color"],Yr=["stroke-dasharray","stroke-dashoffset"],en={class:"percent"},an={key:1,class:"multi-risk-box"},tn={class:"model-name"},sn={class:"model-progress-bar"},rn={class:"model-percentage"},nn={class:"model-selector"},ln=["value"];function on(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",{class:"mortality-risk-card",style:(0,k.Tr)(l.getCardBoxShadow(t.mortalityPercentage))},[a[4]||(a[4]=(0,i.Lk)("h3",{class:"mortality-risk-title"},"Mortality Risk",-1)),"All"!==n.selectedModelLocal?((0,i.uX)(),(0,i.CE)("div",Gr,[(0,i.Lk)("div",Hr,[((0,i.uX)(),(0,i.CE)("svg",qr,[(0,i.Lk)("defs",null,[(0,i.Lk)("linearGradient",Jr,[(0,i.Lk)("stop",{offset:"0%","stop-color":l.startColor},null,8,Kr),(0,i.Lk)("stop",{offset:"100%","stop-color":l.endColor},null,8,Zr)])]),a[1]||(a[1]=(0,i.Lk)("circle",{class:"circle-bg",cx:"60",cy:"60",r:"50"},null,-1)),(0,i.Lk)("circle",{class:"circle-fg",cx:"60",cy:"60",r:"50","stroke-dasharray":l.circumference,"stroke-dashoffset":l.dashOffset,stroke:"url(#neoGradient)"},null,8,Yr)])),((0,i.uX)(),(0,i.CE)("div",{class:"center-text",key:l.formattedRisk},[(0,i.Lk)("div",en,(0,k.v_)(l.formattedRisk)+"%",1),a[2]||(a[2]=(0,i.Lk)("div",{class:"subtitle"},"Risk Level",-1))]))])])):((0,i.uX)(),(0,i.CE)("div",an,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.modelPercentages,((e,a)=>((0,i.uX)(),(0,i.CE)("div",{key:a,class:"model-item"},[(0,i.Lk)("div",tn,(0,k.v_)(a),1),(0,i.Lk)("div",sn,[(0,i.Lk)("div",{class:"progress",style:(0,k.Tr)(l.getProgressBarStyle(e))},null,4)]),(0,i.Lk)("div",rn,(0,k.v_)(l.formatRisk(e))+"%",1)])))),128))])),(0,i.Lk)("div",nn,[a[3]||(a[3]=(0,i.Lk)("label",{for:"modelSelect"},"Model:",-1)),(0,i.bo)((0,i.Lk)("select",{id:"modelSelect","onUpdate:modelValue":a[0]||(a[0]=e=>n.selectedModelLocal=e)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.availableModels,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e,value:e},(0,k.v_)(e),9,ln)))),128))],512),[[s.u1,n.selectedModelLocal]])])],4)}const dn={name:"MortalityRisk",props:{selectedModel:String,mortalityPercentage:Number,fetchMortalityRisk:Function},emits:["update:selectedModel"],data(){return{selectedModelLocal:this.selectedModel,modelPercentages:{},availableModels:["XGBOOST","DecisionTree","LogisticRegression","All"]}},computed:{formattedRisk(){const e=Number(this.mortalityPercentage);return isNaN(e)?"0.0":(100*e).toFixed(1)},percentageDecimal(){return isNaN(this.mortalityPercentage)?0:Math.min(Math.max(this.mortalityPercentage,0),1)},circumference(){return 2*Math.PI*50},dashOffset(){return this.circumference*(1-this.percentageDecimal)},startColor(){return this.getColor(100*this.percentageDecimal,!0)},endColor(){return this.getColor(100*this.percentageDecimal,!1)}},watch:{async selectedModelLocal(e){this.$emit("update:selectedModel",e),"All"===e&&await this.fetchAllModelRisks()}},mounted(){"All"===this.selectedModelLocal&&this.fetchAllModelRisks()},methods:{getCardBoxShadow(e){const a=100*e;let t="0 0 20px rgba(0, 0, 255, 0.7)";return t="All"===this.selectedModelLocal?"0 0 25px rgba(0, 0, 255, 0.7)":a<=33?"0 0 25px 5px rgba(76, 175, 80, 0.8)":a<=66?"0 0 25px 5px rgba(255, 152, 0, 0.8)":"0 0 25px 5px rgba(244, 67, 54, 0.8)",{boxShadow:t}},getProgressBarStyle(e){const a=100*e;let t="#4caf50";return t=a<=33?"#4caf50":a<=66?"#ff9800":"#f44336",{width:this.formatRisk(e)+"%",backgroundColor:t}},async fetchAllModelRisks(){const e=["XGBOOST","DecisionTree","LogisticRegression"],a={};for(const t of e){const e=await this.fetchMortalityRisk(t);a[t]=e}this.modelPercentages=a},formatRisk(e){const a=Number(e);return isNaN(a)?"0.0":(100*a).toFixed(1)},getColor(e,a){return e<=33?a?"#4cd964":"#34c759":e<=66?a?"#ffe259":"#ffa751":a?"#ff5f6d":"#ffc371"}}},cn=(0,m.A)(dn,[["render",on],["__scopeId","data-v-b55a094e"]]),mn=cn,un={class:"patient-details-container"},pn={class:"details-slider"},hn={class:"details-items",ref:"slider"};function _n(e,a,t,s,r,n){const l=(0,i.g2)("PatientDetailItem");return(0,i.uX)(),(0,i.CE)("div",un,[a[0]||(a[0]=(0,i.Lk)("h2",{class:"section-title"},"Patient Details",-1)),(0,i.Lk)("div",pn,[(0,i.Lk)("div",hn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.patientData,((e,a,s)=>((0,i.uX)(),(0,i.Wv)(l,{key:s,title:n.formatKey(a),value:e,icon:t.getItemVisualConfig(a).icon,backgroundColor:t.getItemVisualConfig(a).backgroundColor},null,8,["title","value","icon","backgroundColor"])))),128))],512)])])}const gn=["title"],vn={class:"icon"},bn={class:"value"},fn={class:"title"};function kn(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",{class:"badge-card",title:`${t.title}: ${t.value}`,style:(0,k.Tr)({background:t.backgroundColor})},[(0,i.Lk)("div",vn,(0,k.v_)(t.icon),1),(0,i.Lk)("div",bn,(0,k.v_)(t.value),1),(0,i.Lk)("div",fn,(0,k.v_)(t.title),1),(0,i.Lk)("div",{class:"glow",style:(0,k.Tr)({background:`radial-gradient(circle, ${t.glowColor}, transparent 70%)`})},null,4)],12,gn)}const yn={name:"PatientDetailItem",props:{title:{type:String,required:!0},value:{type:String,required:!0},icon:{type:String,default:"ðŸ©º"},glowColor:{type:String,default:"rgba(173, 216, 230, 0.25)"},backgroundColor:{type:String,default:"linear-gradient(135deg, #f9fcff, #edf4fa)"}}},Ln=(0,m.A)(yn,[["render",kn],["__scopeId","data-v-24e7222b"]]),wn=Ln,Cn={name:"PatientDetails",components:{PatientDetailItem:wn},props:{patientData:{type:Object,required:!0},getItemVisualConfig:{type:Function,default:()=>()=>({})}},methods:{formatKey(e){return e.replace(/_/g," ").replace(/\b[a-z]/g,(e=>e.toUpperCase()))}}},xn=(0,m.A)(Cn,[["render",_n],["__scopeId","data-v-7c3f6990"]]),In=xn,Pn={class:"prediction-explanations-container"},Mn={class:"horizontal-slider-wrapper"},En={class:"vertical-scroll-container"},Un={class:"models-wrapper"};function An(e,a,t,s,r,n){const l=(0,i.g2)("ModelExplainableSection");return(0,i.uX)(),(0,i.CE)("div",Pn,[(0,i.Lk)("div",Mn,[(0,i.Lk)("div",En,[(0,i.Lk)("div",Un,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.filteredPredictionData,(e=>((0,i.uX)(),(0,i.Wv)(l,{key:`${e.group}-${e.model||"single"}-${t.viewMode}`,"model-name":e.model?`${e.group} â€“ ${e.model}`:e.group,"model-data":e.features,group:e.group,"is-all-mode":"All"===t.selectedModel,"view-mode":t.viewMode},null,8,["model-name","model-data","group","is-all-mode","view-mode"])))),128))])])])])}async function Sn(e){const a=await fetch(e);if(!a.ok)throw new Error(`Failed to load ${e}`);return a.json()}async function Dn(e){const a=await Sn("/data/model_predictions.json"),t=a.find((a=>a.patient_id===e.toString()));if(t)return t.XGBoost_Pred;throw new Error("Prediction not found for the given patient_id")}async function Xn(e){const a=await Sn("/data/model_predictions.json"),t=a.find((a=>a.patient_id===e.toString()));if(t)return t.DecisionTree_Pred;throw new Error("Prediction not found for the given patient_id")}async function Fn(e){const a=await Sn("/data/model_predictions.json"),t=a.find((a=>a.patient_id===e.toString()));if(t)return t.LogisticRegression_Pred;throw new Error("Prediction not found for the given patient_id")}async function Tn(e,a){const t=await Sn("/data/patients_details.json"),s=t.find((a=>a.patient_id===e.toString()));if(!s)throw new Error("Patient not found");const i=await Sn("/data/variable_mapping.json"),r=(e,a)=>{const t={};for(const s in e){const i=a[s]||s;t[i]=e[s]}return t},n=r(s,i);return n}async function Nn(e,a){try{const s=await Sn(`/data/patient_contributions/patient_${e}_explanation.json`);console.log("Patient Explanation:",s[a]);try{return s[a]}catch(t){return console.error(`Model name '${a}' not found for patient ${e}.`),null}}catch(t){return console.error(`Error importing explanation for patient ${e}:`,t),null}}(async()=>{try{const e="125998",a=await Tn(e);console.log("Patient Details:",a);const t=await Dn(e);console.log("XGBoost Prediction:",t);const s=await Xn(e);console.log("DecisionTree Prediction:",s);const i=await Fn(e);console.log("LogisticRegression Prediction:",i)}catch(e){console.error("Error during tests:",e.message)}})();const On={class:"model-title"},Rn={key:0,class:"model-items"};function Vn(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",{class:(0,k.C4)(["model-section",n.groupClass])},[(0,i.Lk)("h3",On,(0,k.v_)(t.modelName),1),t.modelData&&t.modelData.length?((0,i.uX)(),(0,i.CE)("div",Rn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(t.modelData,((e,a)=>((0,i.uX)(),(0,i.Wv)((0,i.$y)(n.getComponent),{key:e.name,feature:e.name,value:e.percentage},null,8,["feature","value"])))),128))])):(0,i.Q3)("",!0)],2)}const Qn=["title"],$n={class:"progress-ring",width:"80",height:"80"},jn={class:"circle-text"},zn=["title"];function Bn(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",{class:"feature-container",title:t.feature},[(0,i.Lk)("div",{class:"circle-container",style:(0,k.Tr)(n.circleBackgroundStyle)},[((0,i.uX)(),(0,i.CE)("svg",$n,[a[0]||(a[0]=(0,i.Lk)("circle",{class:"progress-ring__background",r:"35",cx:"40",cy:"40"},null,-1)),(0,i.Lk)("circle",{class:"progress-ring__progress",r:"35",cx:"40",cy:"40",style:(0,k.Tr)(n.progressStyle)},null,4)])),(0,i.Lk)("div",jn,(0,k.v_)(Math.abs(t.value).toFixed(1))+"%",1)],4),(0,i.Lk)("div",{class:"feature-name",title:t.feature},(0,k.v_)(n.formatFeature(t.feature)),9,zn)],8,Qn)}const Wn={name:"FeatureCircle",props:{feature:{type:String,required:!0},value:{type:Number,required:!0}},computed:{progressStyle(){const e=35,a=2*Math.PI*e,t=Math.abs(this.value),s=a-t/100*a,i=this.getColor(this.value);return{strokeDasharray:`${a} ${a}`,strokeDashoffset:s,stroke:i,transition:"stroke-dashoffset 0.8s ease, stroke 0.8s ease"}},circleBackgroundStyle(){const e=this.getColor(this.value,!0);return{backgroundColor:e,borderRadius:"50%",width:"80px",height:"80px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.8s ease"}}},methods:{formatFeature(e){return e&&"string"===typeof e?e.replace(/_/g," ").replace(/\b[a-z]/g,(e=>e.toUpperCase())):""},getColor(e,a=!1){let t;if(e<0){const a=Math.min(100,5*Math.abs(e));t=`hsl(120, ${a}%, 50%)`}else{const a=Math.min(100,5*e);t=`hsl(0, ${a}%, 50%)`}return a?t.replace("hsl","hsla").replace(")",", 0.2)"):t}}},Gn=(0,m.A)(Wn,[["render",Bn],["__scopeId","data-v-c8f0ebde"]]),Hn=Gn,qn={class:"vital-card"},Jn={class:"vital-label"},Kn={class:"vital-bar"};function Zn(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",qn,[(0,i.Lk)("div",{class:(0,k.C4)(["vital-value",n.valueClass])},(0,k.v_)(Math.abs(t.value).toFixed(1))+"% ",3),(0,i.Lk)("div",Jn,(0,k.v_)(n.formatFeature(t.feature)),1),(0,i.Lk)("div",Kn,[(0,i.Lk)("div",{class:"vital-bar-fill",style:(0,k.Tr)(n.barStyle)},null,4)])])}const Yn={name:"VitalStatBlock",props:{value:{type:Number,required:!0},feature:{type:String,required:!0}},computed:{valueClass(){return this.value>=0?"value-positive":"value-negative"},barStyle(){return{width:`${Math.min(Math.abs(this.value),100)}%`,backgroundColor:this.value>=0?"#ff4d4f":"#52c41a"}}},methods:{formatFeature(e){return e.replace(/_/g," ").replace(/\b[a-z]/g,(e=>e.toUpperCase()))}}},el=(0,m.A)(Yn,[["render",Zn],["__scopeId","data-v-4ed15b78"]]),al=el,tl={class:"data-tile"},sl={class:"label"};function il(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",tl,[(0,i.Lk)("div",{class:"value",style:(0,k.Tr)({color:n.getColor(t.value)})},(0,k.v_)(Math.abs(t.value).toFixed(1))+"% ",5),(0,i.Lk)("div",sl,(0,k.v_)(n.formatFeature(t.feature)),1)])}const rl={name:"MinimalDataTile",props:{value:Number,feature:String},methods:{getColor(e){return e>=0?"#cf1322":"#389e0d"},formatFeature(e){return e.replace(/_/g," ").replace(/\b[a-z]/g,(e=>e.toUpperCase()))}}},nl=(0,m.A)(rl,[["render",il],["__scopeId","data-v-7644c6c7"]]),ll=nl,ol={name:"ModelExplainableSection",components:{VitalStatBlock:al,CircularFeature:Hn,MinimalDataTile:ll},props:{modelName:{type:String,required:!0},modelData:{type:Array,required:!0},isAllMode:{type:Boolean,default:!1},group:{type:String,default:""},viewMode:{type:String,default:"vital"}},computed:{groupClass(){const e={SHAP:"group-shap",LIME:"group-lime",Inherent:"group-inherent"};return e[this.group]||"group-default"},getComponent(){switch(this.viewMode){case"circular":return"CircularFeature";case"mini":return"MinimalDataTile";default:return"VitalStatBlock"}}}},dl=(0,m.A)(ol,[["render",Vn],["__scopeId","data-v-766a6f97"]]),cl=dl,ml={name:"PredictionExplanations",components:{ModelExplainableSection:cl},props:{patientId:{type:String,required:!0},selectedModel:{type:String,required:!0},viewMode:{type:String,default:"vital"}},data(){return{predictionData:[],filteredPredictionData:[],lastFilters:null}},methods:{async loadPredictionData(){if("All"===this.selectedModel){const e=await this.fetchAllExplanations();this.predictionData=Object.entries(e).flatMap((([e,a])=>Object.entries(a).map((([a,t])=>({group:e,model:a,features:Object.entries(t||{}).map((([e,a])=>({name:e,percentage:a})))})))))}else{const e=await Nn(this.patientId,this.selectedModel);this.predictionData=Object.entries(e||{}).map((([e,a])=>({group:e,features:Object.entries(a).map((([e,a])=>({name:e,percentage:a})))})))}this.filteredPredictionData=[...this.predictionData]},async fetchAllExplanations(){const e=["XGBOOST","LogisticRegression","DecisionTree"],a={};for(const t of e){const e=await Nn(this.patientId,t);for(const[s,i]of Object.entries(e))a[s]||(a[s]={}),a[s][t]=i}return a},applyFilters(e){this.lastFilters=e;let a=[...this.predictionData];a=a.map((a=>{let t=[...a.features];return"red"===e.filterType?t=t.filter((e=>e.percentage>0)):"green"===e.filterType&&(t=t.filter((e=>e.percentage<0))),e.searchQuery&&(t=t.filter((a=>a.name.toLowerCase().includes(e.searchQuery.toLowerCase())))),"desc"===e.sortOrder?t.sort(((e,a)=>Math.abs(a.percentage)-Math.abs(e.percentage))):"asc"===e.sortOrder?t.sort(((e,a)=>Math.abs(e.percentage)-Math.abs(a.percentage))):"abc"===e.sortOrder&&t.sort(((e,a)=>e.name.localeCompare(a.name))),{...a,features:t}})),this.filteredPredictionData=a}},watch:{patientId:"loadPredictionData",selectedModel:"loadPredictionData",viewMode(e){this.lastFilters&&this.applyFilters(this.lastFilters)}},mounted(){this.loadPredictionData()}},ul=(0,m.A)(ml,[["render",An],["__scopeId","data-v-53e29250"]]),pl=ul,hl={class:"patient-info-container"},_l={class:"patient-info"},gl={class:"patient-value"};function vl(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",hl,[a[1]||(a[1]=(0,i.Lk)("h2",{class:"section-title"},"Patient Information",-1)),(0,i.Lk)("div",_l,[a[0]||(a[0]=(0,i.Lk)("span",{class:"patient-label"},"Patient ID:",-1)),(0,i.Lk)("span",gl,(0,k.v_)(t.patientId),1)])])}const bl={name:"PatientInfo",props:{patientId:{type:String,required:!0}}},fl=(0,m.A)(bl,[["render",vl],["__scopeId","data-v-0ec3c3da"]]),kl=fl,yl={class:"search-container"};function Ll(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",yl,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"search-input","onUpdate:modelValue":a[0]||(a[0]=e=>n.searchQuery=e),placeholder:"Enter patient ID..."},null,512),[[s.Jo,n.searchQuery]]),(0,i.Lk)("button",{class:"search-button",onClick:a[1]||(a[1]=(...e)=>l.onSearch&&l.onSearch(...e))}," Search ")])}const wl={name:"PatientSearch",data(){return{searchQuery:""}},methods:{onSearch(){this.searchQuery.trim()?(this.$emit("search",this.searchQuery.trim()),this.searchQuery=""):alert("Please enter a valid patient ID.")}}},Cl=(0,m.A)(wl,[["render",Ll],["__scopeId","data-v-458ea3c8"]]),xl=Cl,Il={class:"filters-container"},Pl={class:"view-mode-buttons"};function Ml(e,a,t,r,n,l){return(0,i.uX)(),(0,i.CE)("div",Il,[(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>n.searchQuery=e),class:"search-input",placeholder:"ðŸ” Search features...",onInput:a[1]||(a[1]=(...e)=>l.updateFilters&&l.updateFilters(...e))},null,544),[[s.Jo,n.searchQuery]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>n.selectedFilterType=e),class:"filter-dropdown",onChange:a[3]||(a[3]=(...e)=>l.updateFilters&&l.updateFilters(...e))},a[9]||(a[9]=[(0,i.Lk)("option",{value:"all"},"All (Default)",-1),(0,i.Lk)("option",{value:"red"},"ðŸ”´ Red Only",-1),(0,i.Lk)("option",{value:"green"},"ðŸŸ¢ Green Only",-1)]),544),[[s.u1,n.selectedFilterType]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>n.selectedSortOrder=e),class:"filter-dropdown",onChange:a[5]||(a[5]=(...e)=>l.updateFilters&&l.updateFilters(...e))},a[10]||(a[10]=[(0,i.Lk)("option",{value:"default"},"Default (No Sorting)",-1),(0,i.Lk)("option",{value:"desc"},"â†“ Descending by %",-1),(0,i.Lk)("option",{value:"asc"},"â†‘ Ascending by %",-1),(0,i.Lk)("option",{value:"abc"},"ðŸ”¤ Sort by ABC",-1)]),544),[[s.u1,n.selectedSortOrder]]),(0,i.Lk)("div",Pl,[(0,i.Lk)("button",{class:(0,k.C4)(["view-button",{active:"circular"===t.viewMode}]),onClick:a[6]||(a[6]=e=>l.changeViewMode("circular")),title:"Circular View"},"ðŸ”µ",2),(0,i.Lk)("button",{class:(0,k.C4)(["view-button",{active:"vital"===t.viewMode}]),onClick:a[7]||(a[7]=e=>l.changeViewMode("vital")),title:"Card View"},"ðŸ“Š",2),(0,i.Lk)("button",{class:(0,k.C4)(["view-button",{active:"mini"===t.viewMode}]),onClick:a[8]||(a[8]=e=>l.changeViewMode("mini")),title:"Compact View"},"ðŸ§©",2)])])}const El={name:"FilterAndSearch",props:{onUpdateFilters:{type:Function,required:!0},viewMode:{type:String,default:"vital"}},data(){return{selectedFilterType:"all",selectedSortOrder:"default",searchQuery:""}},methods:{changeViewMode(e){this.$emit("update:viewMode",e),this.$emit("updateFilters",{filterType:this.selectedFilterType,sortOrder:this.selectedSortOrder,searchQuery:this.searchQuery,viewMode:e})},updateFilters(){this.$emit("updateFilters",{filterType:this.selectedFilterType,sortOrder:this.selectedSortOrder,searchQuery:this.searchQuery,viewMode:this.viewMode})}}},Ul=(0,m.A)(El,[["render",Ml],["__scopeId","data-v-0eadcc6e"]]),Al=Ul,Sl=JSON.parse('{"Patient Id":{"icon":"ðŸ†”","backgroundColor":"linear-gradient(135deg, #d4f5dc, #eafaf1)"},"Hospital Id":{"icon":"ðŸ¥"},"Gender":{"icon":"ðŸ‘¤"},"Age":{"icon":"ðŸŽ‚"},"Weight":{"icon":"âš–ï¸"},"Height":{"icon":"ðŸ“"},"Bmi":{"icon":"ðŸ“Š"},"Ethnicity":{"icon":"ðŸŒ"},"Hospital Admit Source":{"icon":"ðŸš‘"},"Icu Admit Type":{"icon":"ðŸš¨"},"Icu Stay Type":{"icon":"ðŸ›ï¸"},"Readmission Status":{"icon":"ðŸ”"},"Hospital Death":{"icon":"â˜ ï¸"},"Heart Rate Apache":{"icon":"â¤ï¸"},"Oxygen":{"icon":"ðŸ«"},"Ventilated Apache":{"icon":"ðŸ’¨"},"Intubated Apache":{"icon":"ðŸ—£ï¸"},"Creatinine Apache":{"icon":"ðŸ§ª"},"Bilirubin Apache":{"icon":"ðŸ§«"},"Glucose Apache":{"icon":"ðŸ¬"},"Sodium Apache":{"icon":"ðŸ§‚"},"Potassium Apache":{"icon":"ðŸ§ƒ"},"Temp Apache":{"icon":"ðŸŒ¡ï¸"},"Resprate Apache":{"icon":"ðŸ˜®â€ðŸ’¨"},"Gcs Eyes Apache":{"icon":"ðŸ‘ï¸"},"Gcs Motor Apache":{"icon":"ðŸ’ª"},"Gcs Verbal Apache":{"icon":"ðŸ—£ï¸"},"Urineoutput Apache":{"icon":"ðŸš½"},"Solid Tumor With Metastasis":{"icon":"ðŸ§¬"},"Leukemia":{"icon":"ðŸ©¸"},"Lymphoma":{"icon":"ðŸ§«"},"Diabetes Mellitus":{"icon":"ðŸ©"},"Cirrhosis":{"icon":"ðŸ§ƒ"},"Aids":{"icon":"ðŸ§¬"},"Immunosuppression":{"icon":"ðŸ›¡ï¸"},"Apache 4A Hospital Death Prob":{"icon":"ðŸ“‰"},"Apache 4A Icu Death Prob":{"icon":"ðŸ“ˆ"},"Apache 3J Diagnosis":{"icon":"ðŸ“‹"},"Apache 2 Diagnosis":{"icon":"ðŸ“‹"},"Diagnosis":{"icon":"ðŸ“"}}'),Dl={name:"LocalPage",components:{MenuBar:Pi,MortalityRisk:mn,PatientDetails:In,PredictionExplanations:pl,PatientInfo:kl,PatientSearch:xl,FilterAndSearch:Al},data(){return{searchQuery:"",selectedModel:"XGBOOST",mortalityPercentage:0,modelPercentages:{},patientDetails:{name:"No Data",age:0,gender:"Unknown",diagnosis:"No Data"},patientId:"",isDataVisible:!1,errorMessage:"",loadingMessage:"Please search for a patient.",viewMode:"vital"}},methods:{async fetchPatientDetails(){try{const e=await Tn(this.patientId);this.patientDetails=e}catch(e){this.errorMessage="Failed to fetch patient details: "+e.message}},async fetchMortalityRisk(e){try{if("XGBOOST"===e)return await Dn(this.patientId);if("DecisionTree"===e)return await Xn(this.patientId);if("LogisticRegression"===e)return await Fn(this.patientId)}catch(a){return this.errorMessage="Failed to fetch mortality risk: "+a.message,0}},async fetchAllModels(){try{const e=["XGBOOST","LogisticRegression","DecisionTree"],a={};for(const t of e)a[t]=await this.fetchMortalityRisk(t);this.modelPercentages=a}catch(e){this.errorMessage="Failed to fetch model data: "+e.message}},async handlePatientSearch(e){this.patientId=e,this.errorMessage="",this.isDataVisible=!1;try{await this.fetchPatientDetails(),"All"===this.selectedModel?await this.fetchAllModels():this.mortalityPercentage=await this.fetchMortalityRisk(this.selectedModel),this.isDataVisible=!0}catch(a){this.errorMessage="Error during patient search: "+a.message,this.isDataVisible=!1}},handleLogout(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("userDetails"),this.$router.push("/")},applyFiltersToPrediction(e){console.log("ðŸ” Filters received:",e);const a=this.$refs.predictionExplanations;a&&a.applyFilters&&a.applyFilters(e),e.viewMode!==this.viewMode&&(this.viewMode=e.viewMode)},getItemVisualConfig(e){return Sl[e]||{}}},created(){d.on("token-expired",this.handleLogout);const e=this.$route.query;e.patientId&&(this.patientId=e.patientId,this.handlePatientSearch(e.patientId))},beforeUnmount(){d.off("token-expired",this.handleLogout)},watch:{async selectedModel(e){this.isDataVisible&&("All"===e?(this.viewMode="mini",await this.fetchAllModels()):(this.viewMode="vital",this.mortalityPercentage=await this.fetchMortalityRisk(e)))}}},Xl=(0,m.A)(Dl,[["render",Wr],["__scopeId","data-v-a60ebbda"]]),Fl=Xl,Tl={class:"about-page"},Nl={class:"hero-section"},Ol={class:"info-grid"},Rl={class:"team-section"},Vl={class:"team-grid"};function Ql(e,a,t,s,r,n){const l=(0,i.g2)("MenuBar"),o=(0,i.g2)("TeamCard");return(0,i.uX)(),(0,i.CE)("div",Tl,[(0,i.bF)(l),(0,i.Lk)("div",Nl,[(0,i.Lk)("div",Ol,[a[1]||(a[1]=(0,i.Fv)('<div class="info-section" data-v-5ba041be><h1 class="title" data-v-5ba041be>ðŸ§  Explainability ICU</h1><p class="subtitle" data-v-5ba041be> A smart ICU system for AI prediction explainability. Built to support clinical decision-making through local and global insights. </p><div class="quick-facts" data-v-5ba041be><h2 data-v-5ba041be><i class="fas fa-microscope" data-v-5ba041be></i> Highlights</h2><ul data-v-5ba041be><li data-v-5ba041be>ðŸ©º Predict ICU mortality (24h data)</li><li data-v-5ba041be>ðŸ§© Compare SHAP, LIME, PDP</li><li data-v-5ba041be>ðŸŒ Local &amp; Global views</li><li data-v-5ba041be>ðŸ“˜ Feature Dictionary</li><li data-v-5ba041be>ðŸ‘©â€âš•ï¸ Clinician feedback</li></ul></div><div class="quick-links" data-v-5ba041be><h2 data-v-5ba041be><i class="fab fa-github" data-v-5ba041be></i> GitHub</h2><div class="links" data-v-5ba041be><a href="https://github.com/Final-Project-explainability/interface" target="_blank" data-v-5ba041be>Frontend</a><a href="https://github.com/Final-Project-explainability/main" target="_blank" data-v-5ba041be>Backend</a><a href="https://youtu.be/xw0PxcqokEs?si=rz6yrF7nqKlz_iVM" target="_blank" data-v-5ba041be>ðŸŽ¥ Demo</a></div></div></div>',1)),(0,i.Lk)("div",Rl,[a[0]||(a[0]=(0,i.Lk)("h2",{class:"team-title"},[(0,i.Lk)("i",{class:"fas fa-users-cog"}),(0,i.eW)(" The Team")],-1)),(0,i.Lk)("div",Vl,[(0,i.bF)(o,{name:"Alon Azran",role:"Frontend Engineer",img:"https://i.pravatar.cc/100?u=alon"}),(0,i.bF)(o,{name:"Ofir Tamir",role:"Backend Developer",img:"https://i.pravatar.cc/100?u=ofir"}),(0,i.bF)(o,{name:"Oded Atias",role:"ML & Explainability",img:"https://i.pravatar.cc/100?u=oded"})])])])])])}const $l={class:"team-card"},jl=["src","alt"];function zl(e,a,t,s,r,n){return(0,i.uX)(),(0,i.CE)("div",$l,[(0,i.Lk)("img",{src:t.img,alt:t.name},null,8,jl),(0,i.Lk)("h3",null,(0,k.v_)(t.name),1),(0,i.Lk)("p",null,(0,k.v_)(t.role),1)])}const Bl={name:"TeamCard",props:{name:String,role:String,img:{type:String,default:"https://i.pravatar.cc/100?u=team"}}},Wl=(0,m.A)(Bl,[["render",zl],["__scopeId","data-v-9c3c41ec"]]),Gl=Wl,Hl={name:"About",components:{MenuBar:Pi,TeamCard:Gl}},ql=(0,m.A)(Hl,[["render",Ql],["__scopeId","data-v-5ba041be"]]),Jl=ql,Kl=[{path:"/",name:"Main",component:oi},{path:"/global",name:"Global",component:Nr},{path:"/local",name:"Local",component:Fl,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:Jl}],Zl=(0,h.aE)({history:(0,h.LA)(),routes:Kl});Zl.beforeEach(((e,a,t)=>{const s=!!localStorage.getItem("token");e.meta.requiresAuth&&!s?t({name:"Login"}):t()}));const Yl=Zl;t(424);document.title="ICU MediClear",(0,s.Ef)(p).use(Yl).mount("#app")}},a={};function t(s){var i=a[s];if(void 0!==i)return i.exports;var r=a[s]={exports:{}};return e[s].call(r.exports,r,r.exports,t),r.exports}t.m=e,(()=>{var e=[];t.O=(a,s,i,r)=>{if(!s){var n=1/0;for(c=0;c<e.length;c++){s=e[c][0],i=e[c][1],r=e[c][2];for(var l=!0,o=0;o<s.length;o++)(!1&r||n>=r)&&Object.keys(t.O).every((e=>t.O[e](s[o])))?s.splice(o--,1):(l=!1,r<n&&(n=r));if(l){e.splice(c--,1);var d=i();void 0!==d&&(a=d)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[s,i,r]}})(),(()=>{t.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(a,{a}),a}})(),(()=>{t.d=(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};t.O.j=a=>0===e[a];var a=(a,s)=>{var i,r,n=s[0],l=s[1],o=s[2],d=0;if(n.some((a=>0!==e[a]))){for(i in l)t.o(l,i)&&(t.m[i]=l[i]);if(o)var c=o(t)}for(a&&a(s);d<n.length;d++)r=n[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))})();var s=t.O(void 0,[504],(()=>t(533)));s=t.O(s)})();
//# sourceMappingURL=app.9ce60321.js.map